/*----------------------------------------------------------------------------*/
/*                                                                            */
/*    Module:       main.cpp                                                  */
/*    Author:       matth                                                     */
/*    Created:      7/26/2023, 10:46:51 PM                                    */
/*    Description:  V5 project                                                */
/*                                                                            */
/*----------------------------------------------------------------------------*/
#include "vex.h"
#include "math.h"
#include "iostream"
#include <string.h>
#include <fstream>
#include <list>
#include <chrono>
#include <vector>
#include <sstream>

using namespace vex;

// A global instance of competition
competition Competition;

// constants used for physics and motion
const double TRACKWIDTH = 11.515;
const double PI = 3.1415;
const double G = -386.1; // 9.81 m/s but in inches/second^2
const double WHEEL_WIDTH = 4;
const double DRIVE_WHEEL_GEAR_RATIO = 5;
const double ARM_WHEEL_GEAR_RATIO = 5;
const double SHOOTER_WHEEL_GEAR_RATIO = 7;
const double ARM_MOTOR_STRIKE_ANGLE = -35;
const double SHOOTER_SPEED_MULTIPLIER = 1.317; // constant to multiply shooter motor rotation rate by after calculating its speed from equations, to account for error

int PLAYING_SIDE = 1; // -1 is left, 1 is right

class vector3 { // vectors in a more physical sense than c++'s default vectors

  public:

  double x;
  double y;
  double z;

  vector3(double x0, double y0, double z0) {
    x = x0;
    y = y0;
    z = z0;
  }

  vector3 difference(vector3 v) {
    return vector3(x-v.x, y-v.y, z-v.z);
  }

  double magnitude() {
    return sqrtf(x*x + y*y + z*z);
  }

  vector3 add(vector3 v) {
    return vector3(x+v.x, y+v.y, z+v.z);
  }

  vector3 mirror(int playingSide) {
    x *= playingSide;
    return *this;
  }

  vector3 mirror() {
    x *= PLAYING_SIDE;
    return *this;
  }

  void print(char* name, char* after) {
    printf("%s: {%f, %f, %f}%s", name, x, y, z, after);
  }
};

class Detection {
  public:
  int centerX;
  int centerY;
  int width;
  int height;
  int color;
  Detection(int x, int y, int w, int h, int c) {
    centerX = x;
    centerY = y;
    width = w;
    height = h;
    color = c;
  }
  Detection() {
    centerX = 0;
    centerY = 0;
    width = 0;
    height = 0;
    color = 0;
  }
};

// constant for the positions of key points, relative to the recalibration position

bool inTeleopPeriod = false;
const int TARGET_CENTER_AND_WAIT = -1;
const int TARGET_RED_HOOP = 0;
const int TARGET_BLUE_HOOP = 1;
const int TARGET_CENTER_HOOP = 2;
const int TARGET_YELLOW_BALL_HOLDER = 3;
// Positions of various targets.
// Vectors are in (forward, right, up) format.
// All court-object position vectors are relative to the centerline of the court, touching the back end.
vector3 RED_HOOP_POSITION = vector3(74, 39.5, 27.5);
vector3 BLUE_HOOP_POSITION = vector3(74, 24, 17);
vector3 CENTER_HOOP_POSITION = vector3(74, 0, 26);
vector3 YELLOW_BALL_HOLDER_POSITION = vector3(74, 39.5, 10);
vector3 INDICATOR_POSITION = vector3(74, 24, 10);
vector3 CORNER_POSITION = vector3(15, 50-15, 10);
//
vector3 TURRET_GIMBAL_POSITION = vector3(-0.2, 0, 1);
vector3 CAMERA_RELATIVE_TO_TURRET_GIMBAL_POSITION = vector3(5, 0, 1); 

// constant for aiming
// For ball shooting; the point along the trajectory that we want to be at by the time we enter the hoop.
// 0.5 is at the vertex, lower is sooner (travelling up when it enters the hoop), higher is later (travelling down when it enters the hoop).
const double TARGET_POINT_ALONG_TRAJECTORY = 0.6;

// constants used for P-controller gain and other guidance

const double TURNING_GAIN_FINE = -0.5;
const double TURNING_GAIN_BROAD = -0.1;
const double FORWARD_GAIN = 30;
const double COORDINATE_GUIDANCE_TURNING_GAIN = -5;
const double COORDINATE_GUIDANCE_DISTANCE_GAIN = 5;
const double MAX_DISTANCE_FROM_TARGET_NARROW = 10; // distance goal when driving to an objective
const double MAX_DISTANCE_FROM_TARGET_BROAD = 5; // acceptable distance when deciding whether to drive to an objective
const double MAX_ANGLE_FROM_BALL = 10;
const double MAX_ANGLE_FROM_HOOP = 1;
const double MAX_DISTANCE_FROM_BALL = 6;

// A global instance of vex::brain used for printing to the V5 brain screen
vex::brain Brain;

// setting motors
motor motorLeft = motor(PORT1, ratio18_1, false);
motor motorRight = motor(PORT10, ratio18_1, true);
motor motorShooterL = motor(PORT11, ratio18_1, false);
motor motorShooterR = motor(PORT12, ratio18_1, true);
motor motorArm = motor(PORT8, ratio18_1, false);
motor motorPusher = motor(PORT13, ratio18_1, false);

sonar sonarL = sonar(Brain.ThreeWirePort.E);
sonar sonarR = sonar(Brain.ThreeWirePort.C);

// setting inertial
inertial IMU = inertial(PORT3);

// setting camera color signatures and making a constant to be able to refer to color signatures by the object they detect rather than their signature number
const int RED_BALL = 1;
const int BLUE_BALL = 2;
const int YELLOW_BALL = 3;
const int RED_HOOP = 4;
//const int BLUE_HOOP = 5;
const int GREEN_INDICATOR = 6;
const int YELLOW_INDICATOR = 7;
vex::vision::signature RED_BALL_SIG = vex::vision::signature(1, 10049, 11513, 10781, -425, 1, -212, 4.1, 0);
vex::vision::signature BLUE_BALL_SIG = vex::vision::signature(2, -2427, -1747, -2087, 10357, 12053, 11205, 5, 0);
vex::vision::signature YELLOW_BALL_SIG = vex::vision::signature(3, 2109, 2857, 2483, -3791, -3283, -3537, 4.7, 0);
vex::vision::signature RED_HOOP_SIG = vex::vision::signature(4, 7157, 7819, 7488, -1105, -373, -739, 11, 0);
vex::vision::signature BLUE_HOOP_SIG = vex::vision::signature(5, 0, 0, 0, 0, 0, 0, 3, 0); // blue hoops get detected as blue balls
vex::vision::signature GREEN_INDICATOR_SIG = vex::vision::signature(6, -4647, -4369, -4508, -3549, -3157, -3353, 2.4, 0);
vex::vision::signature YELLOW_INDICATOR_SIG = vex::vision::signature(7, -1699, 101, -799, -4119, -3775, -3947, 3, 0);
vision camera = vision(PORT15, 50, RED_BALL_SIG, BLUE_BALL_SIG, YELLOW_BALL_SIG, RED_HOOP_SIG, BLUE_HOOP_SIG, GREEN_INDICATOR_SIG, YELLOW_INDICATOR_SIG);
const int CAMERA_PIXEL_WIDTH = 316;
const int CAMERA_PIXEL_HEIGHT = 212;
const int CAMERA_HORIZONTAL_FOV = 61;
const int CAMERA_VERTICAL_FOV = CAMERA_HORIZONTAL_FOV * (CAMERA_PIXEL_HEIGHT / CAMERA_PIXEL_WIDTH);
const double RADIANS_TO_DEGREES = 57.2957795131;
const double CAMERA_DEGREES_PER_PIXEL = 0.193037974684;
const double CAMERA_RADIANS_PER_PIXEL = 0.00336914823961;
const double WIDTH_BALL = 2.1;
const double WIDTH_HOOP = 0;
const double WIDTH_INDICATOR = 0;

// array for storage of currently held balls
std::vector<int> ballsHeld;

// array for keeping track of the ball types of detected balls when they get combined into a multi-scan list
std::vector<int> BALL_TYPES;

// boolean that can override the ball-search function in case time is low and it is a better idea to shoot existing low amounts of balls than to look for more balls
bool timeLimited = false;

// long for keeping track of the previous time position was calculated (isn't implemented yet, idk how time works with c++)
//std::chrono::time_point<std::chrono::system_clock> now = std::chrono::system_clock::now();
//auto now_ms = std::chrono::time_point_cast<std::chrono::milliseconds>(now);
double previousTime;

// calculated position coordinates
vector3 position = vector3(0,0,0);
double heading = 0;
double armAngle = 0;

// image to try and display on the screen for funzies
std::vector<int> values = {3155868,3352737,2894752,2960292,2894758,3025574,2828972,2436010,2632875,2894255,2828972,2698154,3025834,2632622,2697646,2697899,2959786,2632618,2893741,2828716,2828202,3090085,2827943,2697129,3286436,2697124,2892960,2761887,2892959,2958239,3023518,2958236,3023765,3154326,3022737,2891922,2760595,2957451,3153804,3022475,3219337,2825864,3022468,2891138,2891394,2825089,2956161,2825088,2628728,2693500,2759294,2890359,3086711,2824565,2889844,2627699,2759027,2694000,2496879,2693486,2562158,2824302,3282798,2889834,2365542,2954852,2561632,2561116,3549092,3287466,3484329,3287979,3287982,3288495,2764208,3025844,2764210,3091636,2960560,3157172,3025843,3092146,3221934,3025585,2763949,3156399,3287729,3353009,2959532,2828459,3352491,3286957,3220907,2958759,2827684,3154855,3220642,3220643,3024544,3352224,3088537,3088282,3154329,3088532,3219610,3284884,3022737,3022733,3153547,2891149,3153547,2760842,3087495,3284358,3022207,2891137,3218047,2955904,3152512,3480446,3086715,3217531,3086710,3021176,2955385,2759030,2890099,3152244,3020914,2955376,3282800,2889838,3020650,3085929,2954600,2954855,3157418,3353517,3222193,2960560,3222705,3157167,3157172,2829491,2960052,3287987,3157169,2960308,3418803,2567602,3287732,3287731,3287475,3221938,3090606,3286960,3222187,3417775,3286959,3286957,2762669,3089837,3024553,2958758,3286439,3220646,3286178,3155359,3089055,3416733,3350944,3481499,3284888,3154324,3088273,3153809,3219089,3219341,3022730,3153547,2957196,3284617,2956676,3087749,2760323,3217794,3087231,3021696,2890368,2759294,2889853,3152251,3086712,2955128,2562165,2890099,3020914,3086450,3348338,3151722,2955367,2627433,3020651,3085925,3746734,2895282,3091637,2960566,3026357,2960566,2960822,2895286,2960823,2895540,3028914,3026101,2829490,3025589,2829236,2959794,3091378,2828979,3156660,3352754,2894511,2959793,3418033,3418033,3090603,3024556,3220907,3220648,3351718,3089319,2696610,3154849,3285920,3089310,3219868,3219868,3153819,3022742,3219355,2957458,3219344,3022736,2957199,3088013,3153291,3088010,3087750,3087493,2955911,2759811,2825089,2825091,2759552,2824831,2955386,2431607,2824823,2824567,3021688,2759288,2955380,2889842,3152243,3086194,3217264,2955628,3217003,2889578,3484594,3354037,3091896,3485367,3157177,3026612,2830009,3157175,3156920,3091639,2960821,2960567,2698679,3156919,3025590,2829235,3156918,2960564,2828978,3090872,3353268,3156146,2959795,3156402,3024558,2959277,3351980,3351723,3155111,3351720,3024038,3154855,3089313,2957732,3088544,3350684,3088534,3284892,3154327,3089301,3415958,3088527,3022224,3350412,3088271,3022219,3219337,2956936,2956934,3087240,3349123,2956416,3350400,3349378,3086976,3021692,3086967,2890102,2628471,3283321,3217780,3283062,3282803,3086452,2889842,2824302,2889579,3086188,3419832,3288504,3091641,3026360,2961080,2960827,2961080,3091898,3026107,2632890,2960566,3223482,2633144,3025844,2960314,2829238,3156665,2894775,3091640,3418551,3025844,3287736,3352502,3287474,2959793,2959023,3090350,3155374,3089832,2893222,3024296,3351463,3155108,2892961,3089055,3285410,2957726,3219614,3285146,3088278,2826133,2957205,2826128,3088015,3153807,3153290,2957194,2826373,3087751,3022217,3021955,3021700,2759553,3087233,3218051,3349119,3086715,2759292,3348607,3152504,3151734,3020917,2955379,2562674,3021169,3348339,3086192,2955374,3878329,3223482,3092409,2698940,3222716,2961085,2830525,3091898,2829755,3026619,3287993,3026107,3353531,2763706,3091387,2894523,2829498,3156919,3222201,2960057,3222712,2960054,2828984,2894261,3222195,3418033,3352240,3024814,3090093,3024298,3089578,3286183,3351207,3219878,3220388,3023519,3154845,3154077,3219099,3285145,2891929,2826389,3022738,3219598,2825871,3022479,2957198,3087759,3219082,3087500,2956682,2890883,2956677,2956671,2760066,3152513,3218043,3021184,3086458,3218298,3086711,3086199,3020915,3086451,2824052,2824560,2889585,3217261,3747773,3485117,3419836,3157692,2764477,3157690,2633917,3026880,2830780,2894783,3026366,3026364,2763964,2895292,3222716,3222714,3222204,2960570,2567358,3025591,3222458,2828729,3025591,3025333,3025076,2959280,3025074,2959279,2827950,3089838,3220395,2958505,3548326,3155110,3220387,3285924,3089055,3088799,2957213,3154330,3219611,3284633,3088281,3284885,3022992,3350933,3284622,3349896,2956686,2956939,3219079,2825861,3021959,3283588,2955907,3021184,2890369,3021694,3151997,3086971,2889850,2889850,2889846,3414645,3086196,3283057,3086193,2824299,3551164,3289023,3157184,2764479,3092413,3223486,3157184,2830014,3026367,3157438,3092158,3026363,3091646,3157180,3026363,2698684,2633149,2698684,3025852,3287996,3091641,3025593,2632378,3221945,2959542,2763445,3090353,3155890,2827696,3352239,3286701,3286185,3220394,3089321,3351464,3482531,3155103,2957984,3285153,3219869,3219615,3219608,3153815,3154068,3284886,3284883,2760338,3153548,3022475,2826124,2956681,3153029,3022215,3218566,2824834,2759812,2890624,3283584,3414650,3152251,3021436,3151992,3085946,3021948,3283062,3151988,2693491,2955121,3748032,3354559,3289024,3027390,3092158,3026880,2961090,2764736,2961087,2895551,2830272,2698944,2895294,2830269,3157695,2567360,2698686,3025853,2894779,2764220,2960314,3090876,2829239,3156920,3090871,2828723,3024817,3286961,2893746,3221425,3286705,3089837,3089322,3286184,3482791,3155107,3285413,3220383,3219870,3088800,3415964,2891927,3219610,3088278,3022997,3088277,3349908,2695055,3022478,3153547,2825866,3022472,3021958,3087493,2955911,3283336,2824834,3152257,3283581,3152509,3218047,3086460,3152250,3152245,3021172,2889845,3217522,2627442,3551944,3223493,2765506,2633923,2896065,3092414,2830529,2699201,2830277,2960580,2830015,2830013,2895807,2764227,2764222,3419585,2764224,3026366,2698430,2763965,2960570,2764218,2763707,2829242,2828985,2959801,3286966,2828727,3221685,3155890,3155630,3089836,3089580,3220649,3155367,3351719,3154852,3155103,3416482,3154337,3285407,3350942,3154074,3088534,3088281,3154069,2760595,3153558,2957199,3088013,3284368,3218825,3087753,2955911,3022214,3022210,3218309,2825090,3217794,3218050,3152254,3021180,3152249,3020919,3020921,3020662,3151988,2955121,3616452,3289794,3158466,3289537,3092422,3157697,2895810,3157957,3027397,3092165,2896065,2502594,2764737,3026368,3026368,3091903,3028414,3025857,2633152,2763968,2895039,2829500,2895039,2763706,2698424,2828982,2959797,3418547,3286965,3418545,3483055,3286702,2761900,3220137,3220908,3483305,3547814,3351460,3416486,2892448,3219870,3089052,3285146,3088534,3284888,3153556,3350164,3219089,3088019,3218831,3022220,3218830,2694282,3283849,3153285,3153029,2890628,3283841,3086980,2890371,2955901,3086971,3021181,3086459,2955383,2955128,2693235,3480184,3355082,3223750,3223749,2634179,3224005,2962115,3026887,2896069,2830278,2895815,2961603,3026628,2699457,2830277,2895555,2961087,2961087,2698690,2895295,2895296,2829760,3025597,2960316,3091643,2828986,3025082,2960313,2959542,2959796,3090609,2762674,2762412,3155120,3220651,3155624,3351464,3089573,2957993,3154087,3350948,3350688,3220127,3219614,3547550,3153817,3219351,3284887,3088279,3284626,3022736,3219600,3153291,3480718,3349643,2825865,2955910,2956676,2955909,3021954,2956162,2890369,3086972,3021695,3086714,3021177,3086456,2955382,3217778,3224521,3879113,2568645,2896328,2896839,2634180,2634182,3027399,2765767,2764999,2830535,2568389,2830277,2830273,2764997,2633414,2698948,2895299,2764481,3026371,2829246,3091390,2567355,2960317,3091387,3352507,3025593,3221431,3420344,3090868,3024819,2959026,3155119,2827438,3089836,3220908,3155112,3154857,3023782,3089055,2892705,3285917,3089054,3284893,3023004,3219865,3350678,3219093,3219602,3284882,3088017,3088269,3284876,3547283,3218828,3022216,3284105,2955912,3152772,3152771,3218051,3086720,3217789,3152510,2955642,3217525,3086454,3086196,3485899,3355083,2831048,2634439,2896582,3027400,2699720,2241736,3027400,2568900,2830278,2765252,2896067,2764740,2699204,2568387,2961350,2764995,2371521,2633667,2698432,2698945,2763712,2895034,2894780,2763707,3025593,2894264,2828727,3156150,3221171,3221169,3024303,3220910,3220653,2827436,3154858,2893223,3154600,3023272,3351459,3154597,3481761,2826397,3220127,3285146,2891928,3022745,2760594,3153297,2957200,3153550,3088012,3087502,3415436,2694795,2891401,3218822,3218051,2759808,3152515,2824576,2759036,3152252,3021437,2955894,2889847,2824566,3289547,3158731,3093194,2438343,2700488,2831305,2438090,2634441,2830793,2831304,2765512,2896329,2895816,2830278,2895559,2698951,2960837,2698694,3026371,2895303,3222979,2961086,2894786,3092156,3091134,3091387,3287737,2894521,3418039,2894261,3221174,2959283,2827695,2959020,2893228,3220651,2892967,2761897,3286183,3220136,3220389,3482278,3154591,3416223,3023514,2957982,3219611,2891927,3088275,3022739,2957200,3350414,2956688,3153549,3219084,2956683,3087498,2956679,3415431,2824832,2497154,3217792,2824578,2694014,2628222,3086717,2955640,2824308,3486413,2962635,2765513,2766539,3093963,2897100,2830796,2962633,2634442,2699722,2568649,2699977,2699716,2699977,2699209,2699462,3026375,2830278,2764741,2961091,3026370,2829507,2764225,2895038,2895817,3025852,3156666,2959802,2828729,3288249,3025077,3221170,3024561,3090608,3024557,3024044,3155117,3090088,2958247,3286181,3220386,3154340,2892704,3350688,3219869,3416476,3219354,3022743,3088534,3088276,3219346,3153553,3219087,3087757,2825870,3284365,3087500,3349644,3152777,2956423,3218565,3086978,3152256,3152512,2890367,2955644,3217527,2955639,3028684,3029197,2503885,3027918,2635211,2569675,2897356,2831050,2569675,2634699,2830793,2765770,2831049,2896072,2961352,2765000,2437319,2830279,2896070,2895301,3026372,3026369,2895297,2895042,3094209,3025851,2763962,2959802,3223225,2960057,2894264,3156148,3090099,3155888,3155630,3089839,3417514,3351723,2892970,3089576,2958246,2892964,3351202,3416481,3154336,2957982,2957214,3154074,3284888,3153814,3088275,2825879,2891663,3088016,3219343,3548046,2956938,2956681,2891398,3349383,3087236,3087495,2956161,3218047,3021183,3348857,3086966,3283062,3225296,3027920,3224784,3028435,2831821,3093709,2307533,2569675,2504138,2766282,2372552,2831050,2962635,2634698,2568392,2830537,2700230,2764999,2830022,2764229,2764486,3026371,2829765,2567874,2960319,2698429,2828990,2894266,2697913,3155895,2959286,3221169,3024561,2893490,3220657,3351981,3089837,3024300,2893223,2827686,3089575,3023525,3547814,3220127,3351201,3154077,3350688,3088539,3219606,2957203,3153815,2826131,3088276,3153807,3152783,3284366,3153292,3153034,3022217,2956425,3022468,3021699,2890111,3021442,3349119,3086714,3479675,2889845,3225041,3290577,2831566,2766032,2373327,2832590,2373068,2896845,2569677,2634700,2831051,2241482,2438094,2568906,2307272,2568650,2502854,2437575,3027400,2895301,2830277,2698947,2829768,2763969,2764478,3026109,2697917,2894779,2959802,2763703,3222201,3156150,3351987,3155377,2894000,3090349,2893228,2958762,3154858,3351977,3286182,3220134,3089316,3154339,2891936,3285408,3153820,3023006,3219353,3154328,3088278,3219603,2956947,3154321,3218576,3153293,3284364,3087498,2890891,3152776,3087493,3415429,3349123,2890623,3087230,2759801,2562170,3086970,3094228,3224530,2897360,2569938,2503887,3094224,2503890,2766286,2765773,2504399,2372815,2372812,2765262,2765260,2568650,2568651,3026636,2699460,2764745,2567881,3223241,2764230,3026118,2633408,2698689,3221953,2895038,3353019,2763193,2960056,2762935,2959540,3090353,2827701,2958512,3351731,2762157,2958764,3351467,3285929,2892967,3285669,3220130,3285669,3220384,3350690,3285405,3219870,3219356,3285147,3154074,3153811,3350167,2826130,3022483,3219089,3088011,2760844,2956682,3284106,3218823,3284103,2955909,3021695,3414404,3021181,3086714,3020920,3028946,2832083,3093970,2569938,2701266,2635476,2504400,2766033,2700497,2635728,2307275,2634957,2765774,2307274,2896588,2568397,2503370,2633928,2830025,2371788,2895813,3354053,2960836,3026626,2895297,2960830,2698176,3156669,2763451,2894521,3156152,3155893,2894257,3024818,3155887,3221168,3024302,3286190,2827691,3155368,3285929,3351462,3547558,3219878,3023522,3219875,3417246,3219867,3285405,3088534,2826390,3284885,2826131,2957459,2891662,3022480,3022222,3349645,2956934,3153035,2956678,3152774,3414404,3546497,3086719,2955646,3218045,2955388,3225555,2897875,2504657,2570193,2635731,2505169,2177489,2438863,2308305,3554770,2504397,2634703,2569679,2569426,2438860,2765259,2699466,2699469,2830789,2634185,2437066,2961095,2830278,2698692,3026113,2763966,3025853,2632891,3090876,2763707,2959545,3616183,3221429,3220916,2893235,3090093,3024558,3089583,2958765,3220650,3092925,3351718,3089061,3350951,3154592,3285411,2957984,2957980,3023003,3350167,2957718,3088279,2957207,2957201,3284625,3153041,2891407,3088014,3087755,3022473,3087496,3086982,3152771,3152516,3348609,2955647,3086715,3021180,3554004,3225813,2963411,2766545,2570450,2439124,2504659,2504914,2569683,2308303,2963408,2307793,2503379,2634190,3027406,2503628,2307018,2699980,2307017,2961611,2764489,2895814,2698949,2829509,2698947,2698685,2960318,2698427,2829243,2566841,2894265,3090868,2828725,3090612,2959539,3156145,2827950,3024046,2893231,2892972,2959274,3155108,3220390,2892703,3220130,3089060,3220636,3023261,3088796,3022746,3219607,2957208,3154071,3350678,3284625,3088015,2760335,3152784,3087501,2956939,3087493,3022213,3545988,3217796,2694015,3217788,3283583,2955643,3226581,3160021,2701524,2177492,2439635,2570452,2373843,2504915,2439632,2504913,2832084,2308048,2438097,2438862,2569423,2241485,2372812,2372299,2372297,3092172,2306759,2568134,2633927,2568388,2502850,2764223,2829504,2698430,2698172,2960315,2894522,3025338,2959798,3090357,2893491,3155379,3221167,3090353,3091379,3287216,2827944,3220393,2958500,3089570,3088803,2630819,3220382,3285406,3088287,3285145,2891931,3219350,3350676,3153814,2760599,2957456,3088018,2891406,2956939,3284620,3021957,3021956,3022212,3021700,3283330,3021441,2955644,2955646,3292627,2570710,2701268,2636246,2439636,2177746,2046676,2308560,2635731,2242770,2177233,2111440,2307794,2176720,2372815,2504142,2372812,2372553,2699977,2699980,2503117,2699208,2633671,2698946,3091652,2960577,2829504,2436540,2633403,2829497,3025595,2828727,2894520,2894262,2959793,3090354,3089841,2893744,2762924,3351976,2893739,3155113,3024038,2827684,3416484,2958240,3351201,3219870,3023003,3219868,3219356,3350685,3022742,3416736,3088534,3088019,3153552,3022475,2825612,3022219,3086985,3021450,3284103,3086982,3349380,3021439,2759040,3218047,3094998,3095256,2767318,2636756,2112212,2505173,2766804,2504663,2635476,2373331,2570196,2963665,2634966,2307536,2438353,2569934,2241997,2307278,2439116,2373064,2765000,2764999,2830280,2502852,2764481,2895296,3222721,2763709,2829501,2829501,3090876,3156410,2894519,2828473,2960305,3025332,2827952,3090350,3155629,3024301,3155884,3286440,3285926,3155363,3023779,3089568,3154592,2761116,3088543,3154077,3154077,3088535,3219350,3219347,2957205,3022481,3153295,3415950,3022475,3088010,3350153,3087238,2956166,3349123,3283585,2759293,3021441,2693756,3161047,2440149,2440149,2505429,2439894,2833110,2309076,2308566,2701271,2308052,2570707,2242515,2373588,2373074,2373328,2307537,2241999,2438349,2503371,2634442,2568648,2503113,2175431,2437571,2895811,2961086,2633151,2960577,3224001,3026106,2829242,2632888,2960056,2828726,3418292,2828722,2893750,3156140,2959022,2827691,2696617,3351971,3154857,3155107,2892706,2892707,2957985,3220130,3350688,3154076,3022747,3088028,3153814,3088277,3416213,3284881,3088532,2694799,3088267,3218572,3022218,3218570,3480707,3218821,3152515,3218048,3218048,2824826,3292120,3292118,2571219,2112468,2243030,2309334,2308566,2308309,2308564,2504917,2112211,2373589,2373076,2635473,2111441,2700754,2504144,2503373,2372046,2699720,2896075,2634440,2568393,2699206,2830018,2633667,2633405,2764221,2895038,2829500,2829497,3091385,2960313,2831036,3753953,3750360,10593268,2774181,2632623,3221939,3089835,3155111,3024295,3023784,3089315,3351204,3547812,2892444,3219357,3023006,3351193,3154073,3088280,3482271,3022737,3088273,2826128,3153807,3219338,2891402,3219337,3087750,3087754,3284357,3152514,3218560,2890361,3021693,3030230,2833877,2505431,2570712,2702550,2309078,2570965,2177749,2243029,2635987,2242774,2308309,2438869,2569685,2438612,2307282,2308048,2373067,2569165,2831307,2110408,2699466,2634184,2568646,2699206,2437059,2960833,2502080,2960829,2763707,2763963,2632636,2960575,7702250,8555229,7044025,8490951,6453948,2901939,3496395,2828455,3089833,3024041,2892968,3154340,3351456,3089312,3023519,2892700,2826652,2957467,3219356,3154074,2957206,3154067,3285137,2760336,2825871,3284365,3153037,2891148,2956422,3284614,2825350,3087745,2890372,3086722,2890113,2768346,3029974,2898648,2243799,2308824,2505433,2570711,2440151,2177492,2701527,2242773,2439893,2373844,2242772,2570194,2504658,2373330,2438095,2372811,2307273,2307527,2765004,2371787,2568392,2698694,2633670,2764735,2895039,3157182,2829756,2436539,2763971,7436729,8553920,9081809,5074085,5467302,10001099,8820196,3431349,2960777,3155370,3024295,3220390,3023778,2958241,3154594,3024028,2826909,3285403,2957980,3154074,2891673,2957204,2826131,2891666,2957197,2826129,3087756,3153804,3088012,3087751,3021959,3349384,2759815,2956418,2760066,3283581,3096025,2833624,2243801,2243544,2243802,2112728,2112470,2046677,2309077,2374617,2243284,2439890,2243026,2373334,2373842,2177231,2700756,2372818,2438352,2307273,2503116,2372297,2372296,2567878,2698695,2830020,2895810,2502082,2895297,3091643,2699198,11377581,8554704,3949194,4874388,3686748,10132974,4866130,10717823,6781932,2377890,6125530,4214505,2893734,3024034,3154851,2958241,2761634,2570910,3351196,3220123,3088286,3088793,3088280,3088529,2825872,3022735,2760589,2825870,3219085,3218828,3022476,2890887,2694275,3021955,2825092,2890370,2890625,4079067,2636765,2178265,2702298,2309336,2112727,2243543,2243543,2177750,2308820,2046421,2967256,2308053,2439380,2635732,2242771,2308049,2569679,2242255,2700235,2372554,2568653,2503112,2634184,2764741,2633158,2568130,2829506,2764479,2764221,4078814,9994909,9664409,8480118,3484732,6449298,9672912,9081540,3817612,6192064,2115983,4548294,5863379,2901680,2763414,3154848,2958244,3025566,3285663,2957983,3285657,3023259,3285147,3284890,3284367,3088016,3154066,3415698,3284879,2957198,3153295,2694540,3152777,2956421,2956164,2825345,3218049,3022464,3030744,3357916,2899928,2375386,2571738,2309080,2701787,2570970,2374361,2177750,2505429,2373848,2373844,2373842,2177235,2373586,2373076,2438862,2635215,2438091,2765264,2372557,2830794,2372296,2437573,2895808,3026114,2895551,2960830,2895548,13284801,8478814,10646125,12298963,5260144,9538250,6186378,8417432,8816584,3360620,2832994,8819404,4548262,4417478,2634366,2893963,2508214,3089312,3154590,3154076,3153821,3219869,3285145,3088787,3153815,3153809,2956943,3088271,3350415,2956683,2957193,3087498,2956426,2956423,2956424,3217797,2955650,3021694,3358427,2833884,2505946,2506202,2178521,2112729,2440410,2243801,2374360,2439895,2439893,2112213,2243028,2504661,2570450,2176977,2307794,2569427,2308305,2438606,2765773,2569418,2896329,2437830,2633927,2830278,2503106,3026368,2764480,2764733,10252913,12362919,9727626,9202287,9073851,10260139,3689839,7628918,8356789,2893117,2761529,8352118,5064766,10463477,2905267,2572185,2569100,3219873,3023516,3154587,3088798,3023511,3219609,3153816,3350421,3023253,3284885,3153553,3219598,3088015,2957195,3153545,3284363,3087495,2825603,3152515,2694271,2890367,3358430,2834395,2768348,2506459,2374621,2047192,2439896,1981405,2374358,2243542,1981399,1850323,2111959,1981140,1915347,2373841,2308303,2307791,2569679,2503886,2372557,2373321,2503625,2830536,2764743,2568388,2633922,2895553,2699198,2765760,8874376,8937549,10850719,10916002,9139356,5786182,3620954,10325677,6249081,2961744,3154753,4608578,6383548,12762078,6649290,2639008,2766744,3023518,3089311,2826908,3350942,3219865,3285405,3219610,2705850,3022995,3022996,3088274,2891662,3153549,3284110,3284619,3284358,3087497,3087493,3153032,2563203,3218050,3555291,3293147,2636766,3096028,2506457,2244313,2178265,2178265,2638553,2439894,2046425,2243797,2242773,1981396,2046417,2504403,2373329,2439121,2242764,2635214,2569674,2568904,2241735,2634185,2699719,2240962,2830020,2961089,2698944,3492297,11376800,7823731,7495526,7888494,10526926,3613471,3751266,11907555,8093091,3159899,2961755,5069134,10988275,9740014,11054578,2841494,2441085,2765451,2958235,3220127,3089050,3023517,2826648,2377126,3023510,3219608,3350163,3088016,2760334,3153806,3088012,2694796,3153286,3021962,2890887,3087237,2890626,3152515,3162076,3096797,2506971,2507227,2243806,2636761,2375130,2375129,2375898,2374620,1916375,2441427,2767572,2046677,2046163,1850064,1980882,2635215,2177229,2503886,2503373,2373068,2699977,2437578,2437575,2437828,2634181,2437566,2438080,7367075,6836299,9858915,9004656,9399948,6440758,3284769,3489113,12233420,8553900,3954323,2898806,5854271,12105705,10528490,9868721,4810151,2903973,2701969,2435963,2764156,2436226,3220123,2115495,2892183,2957464,3023256,3350421,3219090,2957200,2826125,3351439,2956941,2891148,3087499,3546247,3087490,3152259,3152770,3686876,3162334,2768348,2375389,2309852,2374875,2571736,2768347,2047706,2571737,2047190,2439895,2112211,2308563,2308564,2243281,2177489,2177488,2373581,2438347,2569673,2307018,2438087,2699718,2765511,2830529,2634431,2699713,7629160,8740940,7754823,8019036,5782580,11315433,4072225,2758683,3680821,11702437,9998002,6912436,3027544,3942175,12171250,8227511,4870524,9412066,3760547,2767978,2764403,2698343,2567528,2699390,2829964,2503824,2437518,3088534,2891669,3088272,3022482,3350412,3022478,3153546,3349901,3153801,3087754,3087235,3153029,3021444,3227613,2965725,2244829,2637792,1916380,2702812,2506970,1982170,2179033,2178522,2112471,2243543,2309075,2243283,2243281,2570452,2177232,2439119,2176718,2373324,2699725,2241737,2372552,2372808,2634436,2634178,2438079,6054022,9202524,8156334,12565244,7097661,11512033,8483190,2890008,2298907,3613219,11505057,11379661,8752596,3025993,3613473,11514864,5270168,4747179,10069215,2840968,2310788,2115992,2829162,2894959,2568303,2504051,2374019,2634622,2829701,3023507,3022741,3088274,2760337,3088016,2695052,3022221,3415435,3152778,2891142,2693765,2891136,3490527,2834909,2310111,2768606,2769118,2113497,2571994,1916892,2244568,2178266,1981401,2178262,1719765,1981395,2046419,2308562,2112206,2439376,2438607,2438605,2569675,2438345,2439110,2699975,2306754,2372545,4083585,7625043,8673340,7234169,11111836,7097928,9860502,4007458,3416095,1970196,3940640,11640249,11643091,10393809,3288643,2891294,9533797,7700930,6059190,6320741,5075123,2840225,2511491,2893409,2567007,2371430,2503787,2439547,2504575,2567285,2957457,2826135,2957202,2695056,3415692,2890893,3087757,2825610,2891145,3021958,3415174,3021954,3556063,3293661,2834910,2572768,2179293,2703069,2440924,2571227,2178522,2046937,2112728,2374872,2570965,2046676,2243280,2177744,2177744,2373587,2111693,2372810,2372809,2307272,2372552,2503877,2569669,7370946,6442048,8937811,9270660,10781060,7030598,11108995,11050710,4404274,4798519,2232855,4401443,11575510,12366306,9472180,3681854,3153694,7888727,7568568,4811432,4207408,6651080,4811692,2965083,3028097,2828114,2894424,2568549,2505594,2635895,2830971,2697346,2957717,3349904,3022483,3088272,3088014,3088015,2956428,2890888,3021960,2956932,2891139,3163105,2966497,2769375,2245597,2637789,2179036,2572251,2375385,2702556,2112729,2244056,2506196,2112470,1981396,2243026,2242513,2374096,2242511,2504399,2570185,2504140,2438089,2569159,2307014,2635719,7493210,7952466,7888503,8608852,8146754,13285077,10319248,11770031,5659232,4668737,2298645,4992550,13614839,11245758,10393803,3417393,3483942,11043442,6450600,3298171,4472884,7832785,5536446,2700626,2312093,3025244,2632022,2568550,3029366,2439538,2242685,2434416,3022739,3153553,3284625,3022480,3153548,2825869,3153291,2890635,3087749,3022214,3087746,3884513,3491294,2834656,2638301,2441183,2638557,2441179,2244571,2506713,2178522,2046935,2112726,2112470,2439636,2046419,2374353,2373328,2504144,2307789,2504396,2503627,2503882,2831813,2699976,8219257,6769726,7690606,9928104,7621949,10645083,8999742,12888769,10847627,4801079,4930108,2957861,8081203,13089005,13287420,6844828,3154992,4337702,9135433,6911666,4284579,4473142,9279456,6651845,2633294,3299746,3092325,2565716,2960736,2504299,2636924,2570881,2763636,3219344,3088275,2957201,2891663,3153296,3218828,2694797,3218570,2956679,2956678,3021953,3687394,3686878,2704352,2310877,2703581,2244830,2375645,2048217,2375132,2506202,2243544,2505175,2375124,2243535,2373844,2374606,2504909,2438860,2176715,2373833,2438602,2700488,2569924,2703035,8805966,8346477,7693965,10051397,10316113,8608585,7292467,11244222,9531502,4864832,4732728,3942949,10578498,12761066,13222140,9930412,3355210,4205604,9003851,7568573,4090280,4079433,9608163,5863865,2699089,4022442,2569065,2631001,2633571,2635115,2375546,2767747,2569077,3023488,3154067,3153552,2956945,2956943,2826125,2957197,3022472,3218824,2694787,2760067,4212194,3359202,2769634,2507746,2507739,2441692,2571741,2244062,2178779,2309849,2506199,2243798,2046932,2308819,2243282,2046417,2308302,2438863,2242764,2373322,2439112,2373569,2111684,7890054,8610697,7692141,9332313,8802874,8279104,9002561,9397081,11508943,9141144,5723225,4469302,5060910,10182722,11971546,12828150,10128294,3619416,4730153,9729125,6191033,3891104,3293543,9737689,5010101,2831204,3628178,2766977,2565717,2764128,2898548,2571649,2375305,2700421,2499173,3219604,3088272,3022223,3350415,3022477,3088012,3088269,3021961,3021958,2890887,3491298,3425503,2769888,3033054,2244832,2506975,2375904,2769114,2179032,2309847,1916630,2505433,2178005,2178001,2112719,2309070,2701263,2308555,2504396,2767050,2569673,2373319,11513578,7889009,7828667,11565935,10715025,9658714,9130550,9131576,9200990,13419511,9535368,5527393,3945530,6444113,13217990,11378891,11248849,7626868,5331331,3943208,5193008,5862058,2835309,3626377,9017042,3694226,3162760,2838911,3166895,2763105,2503005,2440832,2243713,2768264,2635139,2630754,3219858,3219601,3285907,3284625,2825869,3022732,3087755,3153032,3153545,3021954,3949794,3491041,2704864,2375905,2638557,2507483,2310364,2769117,2571739,2113242,2112985,1981398,2177748,2046928,2112209,2111951,2570445,2438861,2504650,2373578,2504645,3030484,8084839,8552640,12824788,10382444,11636375,14667261,10971983,9200456,12555419,12694496,8551317,5857130,4142659,8541751,13080472,10721217,10854616,11304057,8286348,3156796,4010291,4743538,4550587,2444155,9148624,4218258,3759538,2575741,4222663,2769286,2831209,2245251,2244495,3162016,4606907,3288717,3824077,7109604,6059491,6715366,7504620,5197281,3153038,3088008,2956422,2760326,3753441,3425506,2508000,3098591,2311138,2638558,2441185,2244317,2178778,2113752,2243543,2047188,2047188,1915859,2308816,2308302,2111949,2570187,2242760,2111943,2177735,5925048,6901328,10524132,7688265,7949121,8867633,12417631,11628112,10445655,10973800,12891608,7895436,6053755,3818841,9068861,12424356,9998529,11579631,11368801,8551059,3419721,4075827,5858159,8162517,2576260,6255241,4678818,4286894,2771574,5600446,2835575,2830439,3893442,8688874,11447794,9806572,7636702,3624137,3088789,2957460,3022481,2956944,2760590,2891402,3088012,3153286,2629251,4409567,3163107,2769377,3360479,2638559,2639068,2311134,2244569,2179287,1982168,1981654,2244053,2243026,2177747,2243281,2635726,2373838,2177226,2504651,2439624,4475106,6574177,8615604,11895915,9330246,13616124,7947817,10115380,14269665,10642760,10978732,13023711,10656721,5922673,4020089,10579017,12230593,9670854,12564214,10710343,10191779,2500932,3485750,5131585,9411015,3823248,3494013,7111884,4087962,2835315,5009069,2833519,2967440,10791163,10529002,9538737,7764402,3551351,3547785,5063319,5664217,3415438,2826125,3022220,3087754,2891402,3153543,2890884,3753441,3360992,3032290,3098080,3228382,2506720,2245341,2703581,2572248,2310104,2243546,2047444,2112466,2178255,2505423,2635983,2439372,2505163,2046921,2375108,7689831,6440010,14012413,9066050,10252401,13013121,9854006,11233354,12021841,9263931,9593429,13351650,9143719,6119284,5990807,11892044,13681403,8028077,11840493,10643788,9864102,2894669,3168140,7567775,10657741,6779332,3561609,7964367,4744866,2768237,3563419,10461166,14406398,12828670,7832005,5468590,3432101,2629708,3154304,3022996,3154063,3022479,2956943,2694539,3022217,3219335,3022727,2629256,3557088,3228894,2901728,3163359,2507997,2703581,2048732,2965979,2048471,2506203,2047703,2243285,2374612,2308819,2308560,2504908,2308810,2308811,2047175,10984117,6442064,9797840,12422550,9330794,12890095,10380627,11169368,10839104,11233349,9329738,12760817,13745889,8684970,6513792,6382198,12286551,12695007,8028084,9342403,12160127,10259118,3882853,4482472,9341091,10391213,9606871,3825564,7438276,4872845,2962531,9607899,14603259,14334920,12762360,5862347,3038105,2630739,2432065,2695546,3219605,3022737,3088272,3219859,3153805,2825868,2956934,2956677,3087750,3294690,3163873,2770401,2835680,2441951,2638814,1983710,2572507,1982170,2309592,2178773,2178006,1981394,2243278,2439377,2439884,2374347,2440649,3557598,8810373,9665231,14203841,10777970,8211511,9263684,9525308,10049592,11299145,10509878,10779799,10715020,14273529,8815788,6516621,7435168,12886452,13550588,8094657,7366020,13413045,9537713,4874133,4220851,9802683,10458285,10660845,3692169,6389441,4611217,2968955,12498928,14729936,13617149,9081308,2709396,3226729,2828381,2366789,2694755,3482263,3022739,2957455,2891919,2956686,3088267,3022730,2956676,2956425,3163617,3098337,3163105,2835936,2835165,2900701,2114268,2309851,2244059,2440663,2047448,1981653,2374611,2439890,2374350,2505422,2505420,2572495,12957899,8610167,13611963,11369338,9921355,11300695,11369069,10116670,13541794,10378810,11301216,10906189,11107222,14075633,9802690,7303325,8948164,12617582,12630000,9408465,5197153,12890825,8487855,9014993,3364494,9144493,10657497,12171260,3161695,6914763,3759245,4087440,13019064,13880062,7963593,2837633,2899044,2770811,3092578,2366017,2301530,3285139,3219342,2891663,2760590,3087502,3284617,2760585,3350157,2825608,4015583,3228639,2638562,2835680,2835679,2441953,2572762,2441437,2506966,2113238,2178517,2244051,2439891,2112464,2112716,1981643,2177994,10788809,9793417,13811668,9461594,10382166,10971987,12292278,11236445,12881798,11298881,9590060,10314308,9723454,11246021,13617137,9275567,6123942,9540560,13348282,12433644,9410012,5197123,12695002,8028850,10460381,3101575,9014730,10526176,12170740,3490159,6127036,3626889,5139099,13092605,4478353,2831698,3027022,3228013,2969222,3156059,2169663,2234437,2892176,3088528,3088269,2760335,2825869,2956943,2891400,2891656,2956677,3623391,3425758,3163870,2639071,2310879,2900956,2507224,2309851,2571991,1981655,1916118,2178258,2309330,2243281,1981644,2570955,2703565,10515842,12955064,10843253,13478311,13409433,9790290,10447192,12617607,14273003,10577737,9983792,11169118,9591616,11772109,14405116,8223908,7239843,9212371,13279393,12169189,8555475,6047294,12498405,8553655,11117281,3494531,8360927,10722786,10988255,4017017,7373762,3165818,5532833,9740008,3091530,2761530,2830932,2704502,3429786,3220055,2169152,2627911,1971000,3153808,2891151,3088016,3547793,2956684,3022470,3415948,3022473,3950050,3229409,2901468,2769630,2638812,2703583,2572507,2179546,2178777,2244311,2113236,2703316,2243537,1719758,2243278,1916107,8874868,11249130,9593940,13945338,12621777,12025456,11693652,12485490,12090485,11103308,10773832,11496006,11631478,10839638,12559572,14733565,9407937,6844055,9804251,13346748,12563436,6442049,4797484,12694752,8751287,10527971,3560835,8031196,10001123,10197458,3624314,9017046,3164015,4944299,4940728,3090245,2827580,2962521,2902137,2705539,2694730,2300223,2431563,2498373,2760575,2956944,3153806,3022477,3219082,3087753,3219080,3678864,3229152,3359966,2835169,2966749,2638813,2638556,2637531,2440922,2506711,2113238,2243793,2047184,2112465,2178510,2833099,2571974,8613028,10585998,10119008,13409687,12093319,13340549,13076085,13608354,11233616,11168587,12487824,11629134,10774352,11171441,13352696,14536701,9076379,6252953,9605325,11894629,12432359,6111278,5192754,13155059,8817853,10461409,3889541,8094672,9475807,8421562,3622761,9805278,3029861,4416672,2901637,2630716,2893892,3421531,2702430,3101072,2300993,2169408,2300999,2169137,2235719,2957200,3284367,3022477,3350155,3153292,2957194,3154059,3294177,3032287,2704352,2507230,2900445,2375900,2244569,2833881,2507478,3361755,2309332,2178512,2374606,2177995,2309065,6382008,11242131,10316658,11829114,13019361,12356763,13801875,14732530,12091507,11628371,9987421,12822488,11299405,10581380,11630200,13089255,14404603,9276862,6582185,8219509,12091495,12234210,8156588,5325108,13221623,9604539,10919129,4085620,7306434,8094150,4479374,5136540,7110852,8160970,4090544,3490185,2432817,2762817,2830158,3361142,3026014,2235194,2562113,2563143,1905702,2299184,2825871,2891406,2957195,2956684,3284361,3022470,2956677,3622110,3097822,3031777,2376669,2835417,2114008,2375387,2375383,2047190,2047953,2112977,2112718,2309578,2374602,3947385,8748482,9398121,11960703,14270687,13409184,14132650,13407109,13472642,13474969,12815489,10116163,9590585,11104606,9396303,10972251,13350620,14404860,8750514,7568822,10785466,11106648,12564723,5061165,5524030,12827635,9145532,10394579,3363956,12496595,12697595,5263501,3163256,4548273,3291228,4617403,3352934,2301749,2696509,2897236,4151444,2498620,2365747,2103611,1773608,2496579,2233916,3284877,2826124,3088013,2825612,3088009,3021963,2956421,3622364,3097310,3032029,2573533,2441693,2572764,2309849,2178519,2243796,2244561,2244047,2243531,2440629,9792885,6173238,9791861,12288887,12819654,13804961,14067876,14396586,13868968,13540243,12878967,14205664,13212829,10645343,11168590,10776943,12421523,12031911,14076153,9339311,9014473,10785454,11371125,13484283,5585983,5126188,12827894,9277376,10198749,5596025,13343106,13024484,3158357,3032696,3363217,3422292,6912961,2563121,2367280,2828610,3426165,3160933,3226478,3419732,2367817,2893139,2695253,2168385,2629773,2695054,3088015,3219088,3022218,3284360,2891143,3293917,3163613,2573022,2703579,2310363,2047961,2638040,2309847,2440659,2506191,2112973,4209783,7223608,9457467,6565938,10976118,13480422,14271982,13869980,13341831,14665190,12816016,13538702,12287594,13739954,11762792,9460795,10380107,12819891,14403832,7165767,12298196,9407933,9015500,11445465,9138269,13288702,4862764,4863790,12630251,8949437,9212362,7960452,13945850,6451112,3682899,3360370,3554146,3424612,7963336,2761011,4012897,4021389,4020105,3561100,2968188,2900098,3027309,3158630,2105163,2234431,3022732,3088268,2957199,2956941,3153034,2956681,3218569,3425248,3096797,3032028,2245339,2441435,2310361,2441945,2375383,2440660,2047184,9008540,7093573,7092278,8076594,6303791,12159886,14598870,14532580,13674424,14334141,12751499,13737109,14001824,13342355,10907482,11498332,13477818,9855815,11437215,14733309,5387047,12624580,9867202,9146574,10196944,7099972,13748222,5254953,5125165,12497631,8684981,8092084,5992080,10986201,5203355,6321328,3421263,3025980,5335965,6977974,7306678,7306170,4874633,5794214,4152213,3232395,2574211,3223659,3090008,2694977,2036785,3022479,3153807,3219342,3219596,2760584,3284873,3021958,3294428,3228633,2900698,2703580,2572760,2769625,1982424,2244057,2244815,4408181,11823184,9261685,8340057,7486000,7288117,10707875,14270693,14600164,14267590,14068392,13344416,13408662,14860491,13609148,11762012,11498597,11630201,10381926,11567249,14537212,5782570,5654609,9278413,8883915,7831482,5325372,13091837,6246476,4534056,12033966,9473213,5332871,4808317,8094908,6319251,10330086,9013699,9080267,8489410,8225464,8093885,9012677,7568828,5796528,4153239,3955351,2901893,3027054,2827610,2827606,2299711,2957200,3154321,3022735,3547019,2891399,2563719,3022468,3424989,3359451,2573272,2441691,2376666,2047960,2113494,2244305,2704059,7422015,10702647,10974095,9853575,7288365,7617074,9652534,14602238,14864110,13937838,14733565,13344919,13080211,15455485,12156253,12750200,12617590,11957336,9529957,12685987,9402220,6314048,4073514,11841258,10855395,5328736,6251140,12829437,8943769,4270627,12825564,9408973,3953259,5990026,10922471,6975370,10919895,9802955,9475023,9409228,9342922,9144775,7045305,6190255,5533609,3495044,3297927,2967171,2830954,2828382,2761816,2562119,2826128,3022479,3088268,3022987,3022731,2891659,2760327,4014815,2638558,2507226,2965720,2703579,2244824,2244567,2702544,10314914,8865600,9717553,11301757,11237550,8272948,8799305,9258807,10716137,14602750,14203075,13875670,13474965,13211286,13869721,13408395,12288621,12418918,12749426,9398362,10517903,8670001,4465956,3218205,2824732,10590931,3945016,4405316,12237556,8086384,4994867,13420541,8224440,4675942,7370141,10525652,11642579,11183836,10067416,10656727,9868746,7635125,5722977,5663387,5664942,5205423,4350375,3035539,3031676,3091563,3155290,2760783,2300237,3022992,3219597,2891916,2891662,2826122,3022471,2891398,3818203,3031772,2834650,2769369,2703578,2506456,2178519,8475219,13341867,8667711,11623229,8141879,11964614,7813684,9327737,11755328,7290686,14602493,15127806,14799607,14202317,13343638,14729431,14462375,13011835,12091237,11957596,9265240,10515071,11367004,4599335,2166548,2823447,3349019,5324857,4867672,4271671,7628140,4670018,13092094,7370666,6580859,11051212,12233955,12169188,11774430,11117788,10131668,6579085,8027309,8489160,7765952,7371448,6779311,3628437,2969489,3031424,3091813,2696789,2367048,2498151,3219601,3088265,2891659,3088011,3284616,3153798,2891402,3162842,2638298,2507480,2638298,2244567,2440664,2310338,8930365,13934505,8340281,14592427,7943990,11637455,8471606,10974637,11689790,7288372,10707052,14536190,14799870,14666737,15057882,14596830,13934223,13343369,11891806,11697023,9526106,11303293,12950427,3744549,2297618,5121822,7566506,9276874,8686538,11642597,8225207,4471105,12498159,8421035,6186628,12038374,12301034,11971042,10721730,10920132,11117020,9999572,9276362,8553656,7569342,6453176,5467567,4087199,3101326,2834818,2764139,2893402,2563661,2564223,3022733,2760591,3219598,2760590,3022733,3087753,3284362,3031773,3424473,2834650,2506969,2441686,2179029,8276835,8143419,13540535,8340028,14464208,7157299,13151725,9520687,10183318,13280666,7353140,11498328,12891636,14930686,14800126,14072529,13473681,14465232,13212310,13406844,9262652,11633304,11235944,12823760,2692639,3283480,10259618,9408461,7962557,4088217,6190002,6057128,7173299,3945544,10591183,12958189,12104672,10328268,11905239,12759766,10920672,10984921,9409748,9933006,8094140,7569086,7436732,5664690,3956639,3033996,3161975,3157352,2630228,2300743,3415689,3219343,2826127,3350156,2957196,3416975,3088266,2891400,3556313,3424985,2769370,2506968,2114008,2245586,9455717,8994870,11963082,8339257,14202329,9388594,11892908,13932404,9193556,13154786,9855097,7813169,11052249,13550333,14996478,14666730,14004148,14859467,14331588,12354423,13872318,10909035,10317423,13417699,2495261,6894879,12366305,10394331,8753620,4876970,4151692,3820919,6125499,3881817,11708127,12761314,12168665,12496095,12365545,11709158,11249124,10461149,9607384,9408976,8226246,7110847,7174841,5533871,4021658,2902151,2768757,3027051,2629974,2300740,2826384,2956944,3285140,2956942,2956941,2760332,3022214,3284872,3490781,3031771,2900696,2375896,2376148,4015748,9128024,10046788,11034799,9585975,12954100,12674111,9324140,13680367,6500651,11968220,13087453,9787997,10456520,12495573,13748734,14537213,14269122,14732267,14992616,12420206,12819361,10971739,11040117,13482214,2824996,9326378,10452611,8293838,8292553,5861553,3365775,3688299,4610963,4934762,12301025,12562392,13878523,12431595,12693481,11578346,10920931,10067419,10065877,9015247,9145290,7897795,6847161,5598897,3759002,2573698,3095666,3222888,2891602,2496835,2957196,3022736,3219343,3153547,3022730,3219081,3153542,3219081,3687387,2834907,2506715,2441687,2769111,8077899,9849421,14121296,9851490,13989191,11238602,14588277,7484465,13155563,12879200,5581866,12890596,11969976,7157825,11248328,10186422,14274301,15061753,14001821,14134183,13142647,10644573,9594200,11302512,12101852,3021858,13206884,9270638,8357572,6257853,6256312,3891607,3623007,5532318,12169182,10124941,13812721,12695024,12103397,12234473,10986980,11182816,10985437,9672919,9606098,8686281,8290754,6780856,5992366,2837887,3030121,2829394,3221068,2760272,2431047,3350417,2957200,3022733,3088270,2957452,3022476,2825611,3153285,3293404,2834906,2704088,2442198,2638293,8274503,11819591,15515577,9456712,15184536,9717608,13878257,7090219,11705823,12826081,6828588,9597613,12102100,6106668,11445197,11046798,13091324,14996734,14265775,14000799,13868177,9789262,10446933,9921889,12035292,3546141,11628353,10656459,6650037,2233637,5133184,3163763,4743056,4147050,12955340,13680607,12563694,12432875,12234986,11773922,11314655,11117277,10985691,10131671,10327251,8619975,7045049,6519227,5402543,3889049,3032698,3224941,2564952,2497604,2628965,3416466,2957195,2891664,3022985,2760587,2825866,3087753,3153029,3294171,2703573,2507477,2834901,2704333,9521482,13864313,13810925,9325120,15044705,7944756,13943539,11492408,6434352,12694754,12890078,6238253,11577300,9129265,10918842,10384476,9862007,13552378,15717880,14332853,11828062,11039074,12953297,11569553,9996730,6304032,12485475,11511770,8030151,6650799,5468590,3754342,6387381,12233434,11572125,13155314,12694759,12104939,11773667,12036837,11708899,11117537,10591957,10984918,9540305,8489674,8028611,7306169,5533618,3431066,3097988,3093868,2696530,2431814,2826632,3153807,3153810,3219088,3153805,3022991,3219082,3218824,3219076,3032025,3358936,2572249,2768856,6708929,13859416,13144506,10770852,15109720,15060729,8403759,12889327,13740966,6106664,7156802,12561112,11697001,11445713,11310492,10063281,10392224,9798272,2758727,14334151,14725030,14067886,10907757,9790806,9462109,8020572,6239265,13940430,10988509,9934802,8488388,3690623,6715315,4476263,12495288,13877742,13219554,12825833,11839968,11841252,11972327,10986721,11117277,10460633,10525142,9736915,8358348,7438529,6847165,5205683,4151962,2835844,3027563,2629716,2300485,3219598,3022993,2891660,3022734,3219599,2826120,2957193,2956935,2629254,3490012,2965722,2376406,2441425,8941262,13803942,9588355,10112582,15646897,13942258,13267271,7812673,13155818,13472890,7550761,7750490,9459527,11116742,10984617,8806512,8739649,9733527,1839391,10195408,15123919,13802388,10382695,9396563,11308985,9137278,3810849,12555411,12433386,9869268,6584762,6715568,5463703,12692173,13087681,12301279,13614062,12234217,11907304,12235242,11577050,11577316,11904994,10001885,10196436,9146575,7767751,7503808,7174843,5402033,3298713,3030400,2894946,2564173,2103369,2891921,3350161,2957707,2760588,3350410,3022473,3022728,2826119,3219074,3686871,2900184,2572503,2375380,8411079,10444223,8668993,15575946,11233402,12028123,14009050,7222316,11506650,12367324,12692673,10972519,11772600,10392260,10788804,10852798,9595990,7234146,2036253,3351366,14465477,14000795,11103848,9855828,9068891,5852485,6114098,9731991,10918088,8094916,8027580,7958192,12693980,12031129,12366295,13351658,13088751,12365538,12957678,11906537,12431075,11315174,10526686,10328790,9409493,9277388,8554441,7569091,6584250,5006759,2707598,2637172,3024988,2563143,2760827,2957456,3088272,3022735,3088268,2957194,3219081,2825864,3153541,2956423,3228374,2834646,2375892,2178773,9527412,8998237,14712653,13214715,14926809,8600380,13812979,14064241,6500139,12429539,12366305,12365020,11380172,11181772,11509445,10917042,9009793,2889245,1576216,2498100,9474024,13287414,13808827,10054235,12166863,13151432,8085835,11969480,10586279,7628939,4339522,12559557,13678291,12890328,13351140,13351660,12759779,13088236,12038119,12234731,11511267,11510750,10658527,8818641,10131159,9015503,8292555,7700160,6386615,4285093,2313098,3029364,3024215,2431556,3219346,3219602,3219344,3088016,3088014,3678352,2891399,3088260,2891652,2760578,3096279,3161557,2441170,3096531,11303548,14981226,14399476,9389372,14140412,14335160,9064063,13877740,12957918,7943724,9197691,11905492,11444922,7420739,10918335,10129580,7630713,4402728,1642006,2758961,10985713,11841519,8934466,6177888,9928622,13414092,10980768,7958433,7824506,12757708,11834024,12890321,13153243,12628699,13481700,12891618,12363733,12629479,12036837,11380707,10921184,11380194,10592737,10723038,9606870,8949456,8160714,6978753,6190264,4087719,2836613,3028081,2761301,2366028,3154063,3022740,3153552,3153809,2957197,2825864,2891398,3021707,3022469,3022212,3227862,2703572,2440659,2375120,9590708,11499495,9062743,15454177,8601146,14206459,9651501,9195663,13024236,13022943,8536619,7880016,11315156,11706544,5908776,9274520,5260855,3283998,1773078,2298662,9671910,11445984,9065010,5322281,6443643,7628436,13345964,13609653,14268112,12552349,13284317,12562910,13284054,12496080,13086680,12819641,12693731,11708645,11511518,11906019,11512297,11576800,11051230,10066652,9671381,9342156,8553156,7109051,5794996,3824287,2769791,3027303,2694990,3154301,3023248,3547024,3022990,2826124,3153802,2956937,3022729,3088006,3153796,3021700,2834902,3030481,3096275,2638033,11036785,9521224,15643532,10707145,15317409,8206918,14008281,8075823,7551040,12628193,13087964,12352596,12430036,11969996,11047839,8415579,5914928,2758426,2956066,1970721,6055331,11180759,11178896,4793889,10647942,13408429,13672115,11100788,12878986,13940950,13544639,12422032,12886969,12615298,12690369,12496347,12036579,11512805,12300004,11578083,11773923,10789345,10525917,10394072,9867730,8685771,8093891,6322364,5073071,3167121,2899322,3155802,2366025,2957458,2891663,2891918,3022221,3154058,3088267,3088008,3087494,2563974,3283845,2891139,2833881,3095766,2243794,2637520,9729752,14001834,11035360,9651511,12754938,14728360,9919158,13941993,13478825,12089169,12366301,12955871,12692697,12166863,11115709,9401458,5190441,3546144,3940901,2825778,2628407,3617139,3485777,11830683,11630213,11431791,11236472,14462906,14203341,14600440,12889812,11103860,3351862,12431070,12031426,12624581,12234212,12038638,11577831,11904993,11183072,11577061,9936090,10459350,9146830,8554439,7831486,6321847,4416937,2772109,3029367,2499927,2366291,2957710,3219345,3284620,3022988,2957193,2957450,2956679,2957446,2891397,3088003,3415171,3227093,3292371,2702799,2768337,5459614,10245802,8865346,14599917,8469306,13417463,14523248,7749208,12497646,12760546,12234203,12168925,11642829,11838151,11835821,9071704,6766895,3874590,4139044,3617106,2825520,3941428,12686242,9660272,9922444,13340565,10711155,13077660,12616095,11364469,10377563,13081000,11370142,10708326,12224138,12233946,12693740,12037354,11708387,11182812,11707353,10658529,10984923,9935579,9408979,8620493,7700416,5600440,4350117,2770561,3157612,2563918,3022988,3022990,2956945,3022736,3022989,3022728,3481748,3218822,3284615,2956674,2956164,2891137,2899672,3358165,2571217,2375375,3492050,14126434,14925249,8077644,14797802,8534838,10578902,13613776,11164984,8207405,5974822,7877418,7681573,7812388,5382692,5844515,6504495,4794916,3940645,7888482,5332106,8150893,9067620,9855331,11501188,9855590,12419205,11958902,11172726,13938110,12886456,12559821,11299688,11298646,12496087,12234216,12365286,11643365,12232931,11248608,10985950,10985437,10329306,9672920,9277395,8226250,7306687,6255542,3824026,2964854,3091042,2366544,3022992,3154060,2891664,3153807,3218829,2826125,3284876,2891143,2957188,3284355,3087489,3021697,3095765,2964945,2243795,2309583,2637266,9457318,9915006,14926033,8995938,13812726,14203833,7221818,12629485,13154276,13154789,13220069,12629215,12497626,11970502,11574971,10124410,7887438,4599342,9527921,9658205,9134452,9986401,11367543,7623263,8738924,12685493,13675231,14730741,12956138,10706290,9324871,13018040,13413847,12431842,11972582,12299491,12102629,11183073,11641825,11050970,10131666,9344207,9999828,8948942,7635395,5797303,4220071,3297167,3094898,3023184,3023240,3154318,3022989,2957451,2957199,2957450,3284872,3153544,2825865,2891142,2891139,3088257,3087489,3030738,2964947,2440657,2899154,2505936,14136252,15242846,11563751,15249804,6830403,12031980,13746405,10638650,8929865,13089004,13023462,12760807,12694753,12692694,12034486,9793394,5388092,6833737,7622734,7885664,10249574,10908567,12811898,8410483,12945540,12748165,12879238,9456719,11099211,14003898,13220064,13088225,13089004,12169965,11632786,12167906,11577828,11511260,11970529,11379166,10854363,10132441,10065110,8752074,8093116,6714548,3891103,2507649,2632548,2497361,3022989,2957454,3153550,3285130,3219340,2629515,3219338,3153545,3219079,3088263,2956931,3087490,3153024,3096018,2702548,2178259,2505937,2112973,7688579,10506878,9192761,10573522,14797038,11753789,8470116,13352435,12957908,8140077,10313350,9458812,12561375,12232657,7882598,11639494,11573425,8933432,8933185,10180942,11766697,10577004,12225199,11431278,10114913,13081023,15256038,14665192,14074609,13286637,13089262,12103914,12034527,10248289,12495319,11971808,12430568,11577057,11577313,10789602,10132957,9673180,9605841,8751307,7699645,5730224,3495321,3029881,3090272,3089037,3219598,2891912,3088526,3022734,2957196,3284617,3088270,3022726,2563716,2956931,3022212,2890879,3086974,3096018,2964690,2375119,2505679,2505933,3490008,11368431,15257307,10044986,9325208,13615357,13943275,9785149,9191767,12957422,12757175,11231307,12890056,8929583,12557214,7759765,12953795,10378059,11499126,11430480,8407626,12745586,7487557,14396595,14330028,14000548,11495784,8538974,8209484,7222838,7092280,7879742,7486779,12493240,12365544,12169194,12299239,11708644,11511265,10920931,10526687,10197724,9605583,8357579,6781369,5007275,2772622,2897007,2432865,3088525,3022735,3153550,2891915,2957713,3022730,3088262,3022725,3153287,3022466,3088259,3022467,2825344,2759806,3292371,2636499,2636752,2178257,2374861,2570956,12750209,12488952,15126525,15058112,8535604,7815250,13021681,12819372,12151628,12957159,13351146,13285863,12825312,7501216,12692175,13610953,9918273,13808852,10252142,9984590,14203336,13933205,8143950,14861018,15126262,14597076,14600429,13811163,13943017,13220581,13350362,12825310,12759785,12563178,12103658,12036839,11773922,11314402,11248097,10657502,9934808,9801424,7833038,7567545,4154025,2836098,2958685,3219853,3219856,2891916,3284877,3088266,3153801,2957194,2826119,2957195,3022727,2890887,2890372,2955907,3021696,2627967,3096277,3226834,2440141,1981648,2440398,2046922,6641809,11688777,9390668,10577076,14337772,14587760,14258539,13473681,13351407,13548525,11502274,12092529,7091765,12486815,11756867,13873090,13871523,13548008,13673635,8473418,11629410,12226778,14794708,13074025,10579102,12818389,14338286,14337780,13812207,13351907,12760290,12826349,12695023,12431854,12365289,11839717,11248867,11248869,10920161,10525658,9802965,8817098,7765443,5073068,3232662,3028347,3286150,2957201,2957455,3153805,3022987,3088013,2826377,3284872,3087753,3087753,3153544,2890884,3087744,3283840,2694014,2825596,3423696,3096018,2112975,2505936,2309069,2178506,2243537,10908640,15639667,8731960,8011845,11433950,13418230,12760042,8274249,7221295,12362423,11309742,12424615,9258570,13484270,14140404,14206191,13870009,13875928,11100750,14338287,14401737,7685486,14337774,14269130,8668745,13681658,13216219,11234948,13417453,10381467,12695019,12760303,12496875,11840228,11314916,11314661,11444703,10460381,9541335,9211602,8029900,6912447,4482477,3160178,2498667,2957712,2957201,3088015,2891661,3153807,2957447,3022985,3349900,3153546,2956934,3088007,2957187,2825604,2759808,2890878,2955897,3227090,2375122,2702286,2046672,2374094,2309069,2768332,7371201,10771889,14994682,14469875,14598336,11563618,13479097,14073049,13149889,8550831,12424093,8995384,13610694,13747185,13550323,14008043,8865857,14140143,14008030,9523077,14272241,14401748,7814996,14074607,13613784,7949647,13810916,13482987,13417455,10641235,12431586,11972323,11643365,11970526,11577058,11707362,10526430,10459608,9277649,8423373,7569608,6057911,2904465,2958696,3154063,2957455,3088527,3022990,3088522,3219338,2760329,2826119,3087751,3153032,3088011,2825604,3022469,2956671,3088259,2891129,2890362,2964693,2767825,2178255,2309067,2439889,2570956,2308813,1981387,10642800,8931156,11897846,10127791,14467052,12615042,7615289,8011060,13017017,13146496,13349588,14206970,14009593,14008816,13350880,9258818,14140657,13548503,13412011,14139354,14009329,10246222,14073576,13483495,13350872,10651330,13154538,12694504,10114898,12234471,12168420,11773920,11641810,11182559,10919390,10459608,9999059,8817615,8618693,6321596,3626651,2963329,3088781,3219341,3350671,3022734,3153549,3153807,3153550,3219597,3087753,2956935,2956679,3087494,2891140,2825858,3153280,3086977,2759807,3021434,3753170,2964689,2440400,2833615,2374604,2308556,2177739,2439882,2440394,10114392,13210499,14073327,13474213,8603193,10708044,13013906,9389644,11295322,12084325,13879292,13287926,13220586,6895415,13612762,13812713,13483494,7486268,13746408,13746412,12947851,12691160,13811178,13678820,12561352,11577311,12035794,11100503,11105142,11499387,11834306,11444956,10723550,10853850,10918101,8818125,7504586,6781636,4088234,2899335,3220109,3219600,2891917,3088272,3088524,2826123,3088268,2956938,3022476,2957193,2694789,2891143,2891396,2956419,3088258,2955904,2563198,2825084,3021174,3882195,2768335,2702030,2570960,2571468,2243021,2505163,2308555,2636487,7758326,14788990,9194066,12294309,13148344,13140630,7220009,9190710,13943539,14338299,13878776,13615348,9065303,12760534,13944310,13812724,13547999,9061437,13940944,13150913,13217477,8802957,13680879,13416940,12103899,11637392,10523604,10976392,12229031,12161959,11903963,11116503,10591707,10524630,9277650,8554703,7634884,4876206,2376073,3023752,3219344,3088527,2957710,3417485,3088268,3022987,2826379,3219336,3022730,2891656,2891143,2826115,2891140,2825603,3087487,3087483,2890873,3021688,2890101,2637520,2767571,2374353,2374607,2505165,2112716,2570444,2439627,2701259,2243781,7491714,12027862,12881579,10178145,9914181,12351082,13746149,14206716,13747451,13550841,12621532,6501177,12892135,14075128,13746417,10445162,10445706,13943019,13810923,12822231,9655366,13483503,13089261,12694505,12037343,12167382,7691629,9337477,10784701,10129592,11706839,10525399,9147089,8488907,7830977,4351920,3232155,3024005,3351183,3088271,3416975,3088268,2891915,2825870,2826380,2826378,3284875,3088265,2826121,3022468,2825861,3022465,3022207,3021951,2759552,3021435,2759546,2824823,3357905,2505933,2309070,2440397,2637262,2637006,2440137,2439626,2046665,2374091,2177731,13140313,8008498,10570554,13400692,14271219,14468595,14535421,13813243,13218273,7224121,13611704,12892393,13090292,12288410,13142636,12103139,13221095,13287405,12430538,6567243,12432622,13089006,12365793,12298962,12693993,11052484,11905504,9271449,7958436,9539790,9146321,9407695,8422346,5928123,2772632,3024265,3088784,3154319,3154316,3284878,3023244,3219594,3022731,2826123,2695303,2957450,3153802,3153544,3284614,2825605,2891139,3349377,3415168,3152507,2824826,2825077,2955638,2964943,2833614,2636496,2178251,2439887,2309068,2374347,2635979,2308552,2504906,2504392,2439366,11776508,14404091,13677801,14535421,14665978,14140407,13022965,6566967,11101788,12695276,12430031,7619140,13286635,13484276,12287341,9198217,13155048,12629731,8614016,9401483,12692415,12695520,12497643,12431078,12037352,11117275,11839203,11248349,10262999,8949956,6713241,3037590,2576028,3351693,3022993,3088783,2891922,3088528,3154317,2826124,3219593,2891916,2826123,2760584,2826374,3153801,3088006,2891138,2956419,2891136,2890876,2760062,2825338,3218040,3021173,2890101,3292370,2964433,2767565,2374608,2571468,2439374,2112202,2373836,2504647,2112199,2308040,2635458,2438853,8544244,13352188,13548029,14075387,13348828,8407639,11762022,12100021,11311066,7027521,13146250,13155825,13811958,10183526,12233156,13483503,12891625,11115221,10657494,12956905,12760303,12497647,12036838,12429796,11445989,10067158,10198237,10655958,9012687,6320573,3824295,3154832,3351183,3023250,3351185,2957200,3154061,3154062,3284874,3285391,2891913,3022731,3219079,3219077,3088009,3022211,2890883,2563457,2890880,2956673,2956151,3152250,2890106,2890618,2955380,3292113,2701776,2374861,2505423,2505164,2439628,2439114,2767305,2373829,2308547,2439363,2831811,2438848,2570177,4997874,8931664,9130072,7881545,10511707,11105920,9787489,10508110,13610669,13156086,13024499,13024242,6175557,12365278,12760813,12760560,12433135,11972065,9068989,12234219,12234733,11840488,11183073,10789339,11116513,9539278,9211090,6188478,2573992,3220371,2957970,3088528,3350673,3088782,3022992,2891915,2826125,3219594,2695307,3350154,2891400,2760837,3218824,2957191,3021958,3087748,3087745,3152512,3152767,3020925,2693497,2824565,2955638,2955380,3095761,2898638,2505422,2177739,2439884,2243020,1980875,2833097,2177480,2504392,2701254,2504900,2700224,2373565,2242235,2438846,9137373,13614837,9795223,8867170,12878461,13286120,12893166,13221881,13221106,11369880,8276814,12431851,12431596,12695021,12366831,12366317,11839714,11708643,11708903,12102377,10985954,10722529,8884693,8291276,4482239,3221405,3023765,3023250,2957713,2892432,2957457,3088528,2892174,3153551,3350667,2826377,3022474,3022729,3219081,2956936,2695046,3022467,2956421,2891396,3087235,2563709,2956668,2497147,3218296,2955641,2693238,2955636,2702286,2898894,2440142,2374604,2440396,2439883,2439115,2308039,2177222,2438854,2700229,2700227,2961856,2569406,2438077,2699708,2634171,4010718,8214885,12155506,13679602,12892401,12695279,12958198,13022188,9130072,10514047,12168936,12496872,12234988,11774950,11906284,12298984,10918093,10658015,10198494,9541085,9474261,7766227,3484594,2959000,3090075,3089044,2957970,3023762,3285139,3153806,2957454,2825871,3088010,3416465,3285133,2891657,3153290,3284871,3088008,3088004,3415684,2891137,3021698,2694529,2890622,3086971,3021179,2693751,2824057,2824564,2759026,3292621,2505677,2243531,2570701,2570187,2439368,2439370,2504647,2504645,2373317,2503874,2700226,2241727,2633665,2503868,2764732,2896055,2633912,3026869,3223230,6713850,11709675,12694511,12825072,12101348,11235721,11895431,11971816,12430566,11708646,11577317,11512040,10723298,10459095,10328282,8817369,6451677,3091378,3024282,3155350,2958740,2958229,3220370,3088785,3219599,2826384,3022991,2826381,2957452,2891662,2891664,3022732,2957195,2760584,2957190,3022468,3284357,2891142,3087745,2825858,3283839,3087231,3152510,2824825,2824821,2693495,2824566,3152240,3030223,3553486,2505165,2505164,2112458,2439626,2439111,2439112,2766533,2503877,2503875,2634435,2699711,2830527,2437565,2503353,2568632,2764216,2830005,2895540,2895795,3026869,3419841,3486663,7560074,10724329,11839717,11051491,10591967,10328795,10393049,10001380,8425437,5067727,3614639,2959264,2958999,3285911,3024276,2958229,3220377,3220371,3154322,3219855,3154065,2957457,2957199,3154061,3219853,2956937,3022728,2826122,3022472,2891658,2629510,3087494,3088003,3021958,2956161,2825600,2890371,2759552,2759800,2955898,2824820,2693746,3086706,2627696,3029201,2767307,2440136,2701516,2767052,2440136,2504393,2635975,2439109,2504132,2699972,2700225,2699966,2764989,2437817,2895544,2895542,2764215,3026099,2502323,2829488,2829742,2764209,3026093,2895019,2829229,2895021,2959788,2829224,2698412,3156901,2960545,2828706,3090079,2828443,3024540,3286424,3155352,3089812,3220373,3023764,3089045,3219858,2891921,3022994,3219600,3088525,2957198,2891919,3088267,2891406,3153546,3351181,3088009,3153798,3023240,3022217,3415427,3087743,3022210,2890877,3021696,3087225,2955895,2955893,2627955,2693234,3020911,2963662,2898123,2767305,2636488,2505162,2308299,2635464,2635205,2242754,2699972,2438850,2372288,2831037,2503611,2568633,2699191,2633653,2764723,2764467,2894770,2895023,2829741,3091121,2764202,3287723,2828718,3222439,3156900,3352739,2959521,3220898,3089570,3286686,3155612,3221404,3220377,3154841,3220119,3351189,3089297,2957717,2958226,3023506,3088785,3022993,3154318,3022738,3088270,2891660,3022729,2957196,3153800,3284619,3088006,2956935,3087748,3349379,3022212,3153536,2955906,2825343,3152760,2562681,3152763,3217780,2955634,3086449,3020909,2963917,2832589,2505161,2766794,2570185,2635463,2831816,2766023,2765767,2700226,2635459,2765507,2764990,2633916,2961339,2961083,2763960,2764215,2698674,2895279,3025840,2699184,2960044,2960043,2501546,3156903,3155879,2894506,2762661,2893733,3089826,2696861,3024541,3155101,2827673,3088793,3089306,3220118,2892694,2958230,3088788,3154835,2957970,2957966,3023502,2892173,3088780,3219600,3153805,3153802,2891913,3022983,3087751,2957188,2760580,3218821,2891397,3219591,3087490,3153275,3218044,3086972,2955897,3086710,3151989,3021169,2431342,2824811,3225547,2701516,2766538,2766789,2635719,2504903,2438852,2503620,2372544,2372801,2503616,2764991,2764992,2568637,3157943,2830005,2698678,2960820,2895026,2829232,2960301,3156656,2894763,3025323,3090348,3090601,2828964,2828451,2893730,3090084,2762403,2893471,2761886,2762139,2761887,3285913,3023511,2958232,2892438,3154325,3091612,3154067,3284882,3285395,3219855,3088527,2957454,2891405,3088267,3153802,2891657,2956933,3219077,3022214,2891399,3022213,2957186,2956417,2825601,3152767,3086715,3021689,2955638,3086711,2890101,2955635,3086446,2955373,3422156,2308807,2636227,2504136,2373828,2767298,2438593,2765758,2570684,2372542,2569149,2764732,2503356,2764731,2765498,2567862,3026099,2829747,2567346,2763695,2829484,2960048,2698157,2960298,2698152,3357379,3026090,2960038,3024546,2959524,3155357,3351710,3024029,2893210,2892954,3285655,3220118,2892697,2892437,3023254,2761362,3219603,2957967,2957713,2891920,2957456,2826380,2891917,2826124,2760842,3154058,2760582,3088008,3022727,2825858,2825858,2891139,3284352,2890879,2890621,3283327,3284087,2825336,2693240,2890099,2758512,3086446,2889835,3028939,2963398,2832840,2636230,2962882,2438336,2766271,2700478,2503103,2503357,2634174,2764988,2961339,2830264,2895290,2699191,2698932,2633141,2698673,2763951,2960303,3090862,3025069,3025067,2632874,2698924,2829481,3025830,3090082,3024801,2892960,3155355,3155356,3155100,3155098,3154840,3089301,2958486,3154832,3285394,3023506,2957968,3219600,3023504,3088530,3153803,3153805,2826121,3022731,2694790,3350420,3022725,3088259,3022467,3021955,2629250,2891393,2956160,3087484,2890364,3021947,2956152,3153270,2890098,2693490,2627696,2758766,2496619,3356106,3291078,2831559,2635717,2307775,2373311,2569408,2307261,2634176,2896059,3157944,2437561,2699447,2633911,2633655,3026871,2698673,2829747,2960560,2763950,2763695,2829229,3091114,3090856,2763692,3353770,2567591,2894759,2696867,3352226,2892958,2892952,2892957,3155098,3024027,2958488,2958228,3023508,3155096,3089045,3220117,3154321,2629777,3023758,2957455,3088523,3153804,3022987,2695051,2957193,3088521,3219334,2891399,2825606,3022468,3021955,3088003,2760576,2890877,2760060,3022457,2890356,2759028,3021169,2824561,2693231,2562412,3020903,3094726,3225794,3028163,2634690,2241728,2702013,2765504,2568637,2569150,2830522,2633916,3027126,2895545,3092409,2698935,2895542,2894773,2763699,2894769,2763697,2763694,2829484,2894250,2763433,3025833,3026090,2698153,2960039,2959265,3089824,2696861,3089566,3285913,2958492,2827417,2957979,3285654,3154836,3220629,3154323,3023251,3219602,3089042,2957199,3088271,3219344,2891661,2891402,3088520,2891656,3022984,2629251,3022467,2891649,3021955,2956672,3153025,3152762,3087222,3021432,3021431,2824820,3217780,2824561,2824559,2824301,2824299,2758761,3029191,2963138,2896834,2700223,2635710,2831549,2830777,3092926,2896059,2896056,2961590,2961082,2961077,2830008,3091636,2829494,2960307,2567348,2698160,2764205,2960300,2632619,2960300,3024808,3090856,3091113,2894248,2828195,2893217,3220898,3090078,3089822,3089564,3089048,3023768,3154840,2958230,3089557,3416469,3088789,3088785,3088786,3285395,3154063,2957198,3088780,2826382,3153801,2826120,3022473,2957191,3088004,2956931,2825602,3087487,3087488,2956156,2824828,3087479,3021694,3021434,3021429,2890095,3151981,2824304,2824301,2693226,2890860,3618244,3093699,2569152,2961854,2962365,2569147,3421373,2765244,2699704,2764729,2895799,2961077,2830007,2698933,2960818,2763957,2960818,2764208,3025328,2763693,3091117,3221934,2436267,3090601,2698152,2893735,3417764,2828194,3089827,3024288,3089824,3155357,2958494,3024282,3089305,3220379,3023767,3023764,3023251,3219602,3022739,3286167,3219603,3219856,2826381,2957452,3154059,3022984,3022985,3153796,3154053,2694787,3219587,3088257,3349887,2891135,3152763,2825083,3086974,2955638,3086965,2759028,2955378,2824560,2889837,2692970,3086443,2955365,3617476,3290305,2766015,2896831,3092922,2701241,2764985,3092664,2961335,2830262,2699190,2764470,2699188,2895540,2698674,2895280,3222447,3091630,3091119,3025327,2895278,3156650,2893995,3090602,3090856,2959271,3024805,2893474,2959269,3351970,2565283,3024028,3023774,3023769,3089561,3286168,3484056,3089049,3089300,2826898,3154578,3023505,2891918,2957452,3219343,3350158,2957449,3153543,2957191,3219336,2694279,3021957,3152771,3283837,2891133,2759806,3021945,3087223,3021686,3152755,3086710,2890354,2890096,2824301,2955116,2759018,2824297,2824041,3093955,3617726,2700220,2961850,2700218,3027129,2896311,2830263,3289015,3419574,2830006,2698677,3288242,2829490,2960307,2763952,3026094,2960303,2894509,3091114,2960042,3156140,3025323,3156393,3024552,3090084,2828196,3352738,2893219,3220898,3286431,3352221,2893211,2826910,3220631,3548054,2958231,3024023,2892180,3285398,3219599,3219346,3285136,3285388,3088526,2957449,2891913,3022727,3153799,2760836,3088004,2825348,3153794,3087742,3021694,3284094,2955899,3021951,2955894,2824566,2694003,2890350,2955888,2824304,2627693,2693225,2758758,2824037,3552702,3027389,3158461,3223993,3223736,2830520,3158200,3289273,2895539,2895539,2895795,3026097,3091889,3288497,2829487,2894769,3090865,3222445,3025322,3090858,3090601,3221675,3155882,3090600,3024549,3090340,3418018,3024800,3221152,3024798,3024282,3155357,3220636,3285913,2892439,3220377,3482519,3220373,3220114,2957970,3088786,3088529,3219344,2957198,3088268,3154056,2957449,3022727,3219081,3088260,2694785,3153285,3284095,3153018,3087486,3087229,3349883,3285128,3152502,2955888,2759537,2955633,3151981,2955373,2627694,2562154,2496613,3086179,3486650,2962622,3027642,3158199,3027639,3092406,2896055,2895797,3223219,2895541,2895539,3288496,2632878,2567598,3025581,3090864,3091118,2829228,3221421,2893996,2959528,3287206,2828964,2959782,3679651,2762661,3024806,3024546,3417505,2893213,3286170,3548572,3024028,3220632,3416985,3089049,3023763,3023767,3089042,3285396,3088783,3613072,3154062,3219596,2957450,3219596,3088267,2957703,3284614,3022723,2956675,2956928,3219323,3087741,2694522,3087223,3021687,2956413,3021430,3349105,3152495,2824303,3152235,2758761,2758762,2955109,2561893,3217253,3551932,3027642,3289271,3223734,3157941,3027127,3026611,2961075,3026610,3026097,3550130,3287991,3156908,3091629,3549868,3091373,3287723,2894507,3024812,3155623,3091878,3352741,3286948,3286183,3614629,3417762,3090079,2959264,2892963,3286682,2630813,3548312,3417240,3089559,3285909,3482008,3351187,3220116,3220375,3285647,3285392,3285135,3219342,3219853,3154060,3416202,3022981,3088009,2891140,3022209,3153279,3087490,3022459,3414906,2956154,3152760,3152245,2955894,3086962,3087473,2955379,3151980,2627946,3217513,2758508,2824296,3086181,2627424,4403130,3355064,3158456,3289015,3354550,3288500,3419573,3616178,2960818,3484849,3157166,3287470,3550379,3025835,3025836,3222189,3353003,3483560,3091111,3418279,3549095,3286693,3155623,3483299,3352997,3155107,3417762,2959008,3286175,3220636,3220888,3351958,3416985,3613586,3678872,3350937,3482261,3351187,3285395,3547282,3613069,3285134,3350667,3481740,3416203,3285129,2891654,3415940,3546754,3218819,2891392,3349377,3218811,3152761,3283321,3545720,3218297,3086964,3152240,3086705,3283316,2824559,3350135,3217262,3020648,3020900,2824036,3020130};
    
int IMAGE_PIXEL_RATIO = 4; // how many screen pixels each pixel of data should take up;

// functions and stuff below

struct shooterInputs {
  double angle;
  double velocity;
};

double getHeading() {
  return IMU.yaw();
}

void printPosition() {
  position.print("position", " ");
  printf("heading: %f\n", getHeading());
}

template <typename T>
std::string to_string(T value)
{
    std::ostringstream os ;
    os << value ;
    return os.str() ;
}

void printPositionToFile() {
  std::ofstream fileWriter;
  fileWriter.open("C:\\vexoutput.txt",std::ofstream::out | std::ofstream::trunc);
  std::string output1 = to_string(position.x);
  std::string output2 = to_string(position.y);
  std::string output3 = to_string(getHeading());
  fileWriter << (output1 + "\n");
  fileWriter << (output2 + "\n");
  fileWriter << (output3 + "\n");
  fileWriter.close();
}

void drawRect(double x0, double y0, double x1, double y1, int red, int green, int blue) {
  int SCALE = 1;
  int WIDTH = 480;
  int HEIGHT = 272;
  x0 *= SCALE;
  x1 *= SCALE;
  y0 *= SCALE;
  y1 *= SCALE;
  x0 += WIDTH*0.5;
  y0 += HEIGHT*0.5;
  color c = color(red, green, blue);
  Brain.Screen.setFillColor(c);
  Brain.Screen.drawRectangle(x0, y0, x1, y1);
}

void drawCircle(double x0, double y0, double radius, int red, int green, int blue) {
  int SCALE = 1;
  int WIDTH = 480;
  int HEIGHT = 272;
  x0 *= SCALE;
  y0 *= SCALE;
  radius *= SCALE;
  x0 += WIDTH*0.5;
  y0 += HEIGHT*0.5;
  color c = color(red, green, blue);
  Brain.Screen.setFillColor(c);
  Brain.Screen.drawCircle(x0, y0, radius);
}

void printPositionToScreen() {
  Brain.Screen.clearScreen();
  drawRect(0, 0, 98, 72, 80, 80, 80);
  drawRect(0, 36.5, 100, 1, 100, 70, 0);
  drawRect(0, -36.5, 100, 1, 127, 127, 255);
  drawRect(49.5, 0, 1, 74, 100, 70, 0);
  drawRect(-49.5, 0, 1, 74, 100, 70, 0);
  drawRect(0, -0.5*72+0.5*(72-26.5), 25, (72-26.5), 150, 150, 180);
  drawRect(0, 18, 98, 2, 200, 200, 200);
  drawRect(0, 22.75, 2, 26.5, 200, 200, 200);
  drawRect(-39.5, 0, 2, 72, 200, 200, 200);
  drawRect(39.5, 0, 2, 72, 200, 200, 200);
  drawCircle(position.x, position.y, 11, 127, 0, 0);
  double yawRotated = getHeading()-90;
  dx = cos(yawRotated/57.3);
  dy = sin(yawRotated/57.3);
  drawCircle(position.x + 9*dx, position.y + 9*dy, 2, 255, 0, 0);
}

void updatePosition() { // get global coordinates from motor speed and IMU heading
  double currentTime = Brain.timer(msec);
  double deltaTime = currentTime - previousTime;
  deltaTime /= 1000;
  previousTime = currentTime;

  //Brain.Screen.clearScreen();
  //Brain.Screen.setCursor(1,1);
  //Brain.Screen.print("deltaTime: ");
  //Brain.Screen.print(deltaTime);

  double motorForwardAngularSpeed = 0.5 * (motorLeft.velocity(dps) + motorRight.velocity(dps)) / RADIANS_TO_DEGREES; // forwards speed is the average velocity of the two wheels
  double forwardSpeed = motorForwardAngularSpeed * WHEEL_WIDTH/2 / DRIVE_WHEEL_GEAR_RATIO; // get inches/second speed from motor rotation rate

  double motorTurningAngularSpeed = (motorLeft.velocity(dps) - motorRight.velocity(dps)) / RADIANS_TO_DEGREES;
  //double turningSpeed

  double deltaDistance = forwardSpeed * deltaTime; // get distance travelled since last timestep
  double heading = getHeading() / RADIANS_TO_DEGREES; // convert heading to radians because c++ trig uses radians
  position.x += deltaDistance * cos(heading);
  position.y += deltaDistance * sin(heading);

  printPosition();
  printPositionToFile();
  printPositionToScreen();

  wait(50, msec); // hehe
}

void driveForwardDistance(double distance, double speed, bool wait) {
    double motorAngle = DRIVE_WHEEL_GEAR_RATIO * distance / (WHEEL_WIDTH * PI);
    motorLeft.setVelocity(speed, pct);
    motorRight.setVelocity(speed, pct);
    motorLeft.spinFor(forward, motorAngle, rev, false);
    motorRight.spinFor(forward, motorAngle, rev, wait);
}

void driveForwardSpeed(double speed) {
    motorLeft.spin(forward, speed, pct);
    motorRight.spin(forward, speed, pct);
}

void driveTurn(double angle, bool turnOnCenter, bool wait) {
    double rotations = angle/360;
    double wheelTravel = TRACKWIDTH * PI * rotations;
    double motorAngle = DRIVE_WHEEL_GEAR_RATIO * wheelTravel / (WHEEL_WIDTH * PI);
    if (turnOnCenter) {
        motorLeft.spinFor(forward, motorAngle, rev, false);
        motorRight.spinFor(reverse, motorAngle, rev, wait);
    } else {
        if (angle > 0) {
            motorLeft.spinFor(forward, motorAngle*2, rev, false);
        } else {
            motorRight.spinFor(reverse, motorAngle*2, rev, wait);
        }
    }
}

void driveCommand(double forwardPercent, double sidePercent) {
    motorLeft.spin(forward, forwardPercent + sidePercent, pct);
    motorRight.spin(forward, forwardPercent - sidePercent, pct);
    printf("Drive command of L: %f and R: %f\n", forwardPercent + sidePercent, forwardPercent - sidePercent);
}

void driveGlobal(vector3 positionDesired, double angle) { // turns and drives to desired global coordinates, then turns to desired angle
  double headingDesired = 0;
  double heading = 0;
  double headingError = 0;
  double distanceError = 0;
  
  heading = getHeading();
  headingError = headingDesired - heading;
  headingError = fmod((headingError + 540),360) - 180;
  bool flipDirection = (abs(headingError) > 90);
  flipDirection = false;
  
  do {
    double deltaX = positionDesired.x - position.x;
    double deltaY = positionDesired.y - position.y;
    headingDesired = atan2f(deltaY, deltaX) * RADIANS_TO_DEGREES; // convert heading to degrees because c++ trig uses radians
    heading = getHeading();
    headingError = headingDesired - heading + (flipDirection ? 180 : 0);
    headingError = fmod((headingError + 540), 360) - 180;
    distanceError = sqrtf(deltaX*deltaX + deltaY*deltaY);
    double speedMultiplier = fmax(20-fabs(headingError), 0)/20 * (flipDirection ? -1 : 1);
    driveCommand(distanceError * COORDINATE_GUIDANCE_DISTANCE_GAIN * speedMultiplier, headingError * COORDINATE_GUIDANCE_TURNING_GAIN);
    updatePosition();
    printf("(phase a) headingDesired = %f headingError = %f\n", headingDesired, headingError);
  } while (distanceError > MAX_DISTANCE_FROM_TARGET_NARROW || fabs(headingError) > 10);
  driveForwardDistance(MAX_DISTANCE_FROM_TARGET_NARROW,100,true);
  do {
    headingDesired = angle;
    heading = getHeading();
    headingError = headingDesired - heading;
    headingError = fmod((headingError + 540), 360) - 180;
    headingError *= COORDINATE_GUIDANCE_TURNING_GAIN;
    driveCommand(0, headingError);
    updatePosition();
    printf("(phase b) headingDesired = %f headingError = %f\n", headingDesired, headingError);
  } while (headingError > MAX_ANGLE_FROM_BALL);
}

//void recalibrate() {
//  driveGlobal()
//}

shooterInputs calculateShotAngleAndVelocity(vector3 targetPosition) {
  double distanceX = sqrtf((targetPosition.x - position.x)*(targetPosition.x - position.x) + (targetPosition.y - position.y)*(targetPosition.y - position.y));
  double distanceY = targetPosition.z;
  double desiredVelocityY = sqrt((-0.5*distanceY*G)/(TARGET_POINT_ALONG_TRAJECTORY - TARGET_POINT_ALONG_TRAJECTORY*TARGET_POINT_ALONG_TRAJECTORY));
  double desiredVelocityX = (distanceX*G)/(-desiredVelocityY + ((TARGET_POINT_ALONG_TRAJECTORY > 0.5) ? -1 : 1) * sqrt(desiredVelocityY*desiredVelocityY + 2*distanceY*G));
  double desiredAngle = atan2f(desiredVelocityY, desiredVelocityX);
  double desiredVelocity = sqrt(desiredVelocityX*desiredVelocityX + desiredVelocityY*desiredVelocityY);
  shooterInputs output;
  output.angle = desiredAngle;
  output.velocity = desiredVelocity;
  return output;
}

void resetArmAngle() {
  Brain.Screen.setCursor(1,1);
  Brain.Screen.print(motorArm.current());
  Brain.Screen.setCursor(10,10);
  Brain.Screen.print(motorArm.velocity(rpm));
  motorArm.spin(reverse,30,pct);
  wait(50,msec);
  while (motorArm.current() < 2 || fabs(motorArm.velocity(rpm)) > 5) {
    motorArm.spin(reverse, 30, pct);
  }
  motorArm.stop();
  wait(50,msec);
  motorArm.resetPosition();
  motorArm.spinTo(-ARM_MOTOR_STRIKE_ANGLE, deg, true);
  wait(50,msec);
  motorArm.resetPosition();
}

void resetMotorAngle(motor m, double strikeAngle, vex::directionType dir) {
  Brain.Screen.setCursor(1,1);
  Brain.Screen.print(motorArm.current());
  Brain.Screen.setCursor(10,10);
  Brain.Screen.print(motorArm.velocity(rpm));
  m.spin(dir,30,pct);
  wait(50,msec);
  while (motorArm.current() < 2 || fabs(motorArm.velocity(rpm)) > 5) {
    m.spin(dir, 30, pct);
  }
  m.stop();
  wait(50,msec);
  m.resetPosition();
  m.spinTo(strikeAngle * (dir==forward?1:-1), deg, true);
  wait(50,msec);
  m.resetPosition();
}

void reverseToWall() {
  //while (motorLeft.current() < 2 || motorLeft.velocity(rpm) > 5) {
  //  motorLeft.spin(reverse, 100, pct);
  //  motorRight.spin(reverse, 100, pct);
  //}
  driveForwardDistance(-10, 100, true);
  motorLeft.stop();
  motorRight.stop();
}

void resetPosition() {
  IMU.calibrate();
  while(IMU.isCalibrating()) {
    wait(1, msec);
  }
  position = vector3(6,30*PLAYING_SIDE,1);
  printPosition();
  Brain.resetTimer();
  previousTime = 0;
  updatePosition();
}

void setArmAngle(double angle) {
  armAngle = angle;
  motorArm.spinTo(angle*ARM_WHEEL_GEAR_RATIO, deg, true);
}

double getArmAngle() {
  return armAngle;
}

void setShooterDirection(int input) {
  motorShooterL.spin(reverse, -100*input, pct);
  motorShooterR.spin(reverse, -100*input, pct);
}

void setShooterSpeed(double velocity) { // sets shooter motors to spin at the right rate to reach a target speed in inches/second
  double targetAngularSpeed = velocity / (0.5*WHEEL_WIDTH); // shooter uses wheels, so this uses wheel width
  targetAngularSpeed *= 9.549297; // radians to rpm
  targetAngularSpeed /= SHOOTER_WHEEL_GEAR_RATIO;
  targetAngularSpeed *= SHOOTER_SPEED_MULTIPLIER; // accounts for error
  motorShooterL.spin(forward, targetAngularSpeed, rpm);
  motorShooterR.spin(forward, targetAngularSpeed, rpm);
}

vex::vision::object getLargestObject(std::vector<vex::vision::object> objects) {
  int largestXSize = 0;
  vex::vision::object largestObject;
  for (int i = 0; i < objects.size(); i++) {
    if (objects.at(i).width > largestXSize) {
      largestXSize = objects.at(i).width;
      largestObject = objects.at(i);
    }
  }
  return largestObject;
}

Detection getLargestObject(std::vector<Detection> objects) {
  int largestXSize = 0;
  Detection largestObject;
  for (int i = 0; i < objects.size(); i++) {
    if (objects.at(i).width > largestXSize) {
      largestXSize = objects.at(i).width;
      largestObject = objects.at(i);
    }
  }
  return largestObject;
}

int getLargestObjectId(std::vector<Detection> objects) {
  int largestXSize = 0;
  int largestId = 0;
  for (int i = 0; i < objects.size(); i++) {
    if (objects.at(i).width > largestXSize) {
      largestXSize = objects.at(i).width;
      largestId = i;
    }
  }
  return largestId;
}

int getLargestObjectPosX_SingleScan(vex::vision::object object) {
  return object.centerX - CAMERA_PIXEL_WIDTH*0.5; // X is normally based on 0 - CAMERA_PIXEL_WIDTH, but this adjusts it so centered = 0
}

int getLargestObjectPosX_MultipleScans(std::vector<Detection> objects) {
  return getLargestObject(objects).centerX - CAMERA_PIXEL_WIDTH*0.5; // X is normally based on 0 - CAMERA_PIXEL_WIDTH, but this adjusts it so centered = 0
}

Detection getDetectionClosestTo(std::vector<Detection> objects, int x, int y) {
  double lowestDistance = 9999999;
  Detection closestObject;
  for (int i = 0; i < objects.size(); i++) {
    Detection object = objects.at(i);
    int deltaX = object.centerX - x;
    int deltaY = object.centerY - y;
    double distance = vector3(deltaX, deltaY, 0).magnitude();
    if (distance < lowestDistance) {
      lowestDistance = distance;
      closestObject = object;
    }
  }
  return closestObject;
}

double getObjectDistance(int objectPixelWidth, double objectWidth) {
  double objectFullArcAngle = objectPixelWidth * CAMERA_RADIANS_PER_PIXEL;
  double objectDistance = objectWidth / tanf(objectFullArcAngle);
  //printf("getObjectDistance diagnosis: pixelWidth:%d, objectWidth:%f, objectFullArcAngle:%f, objectDistance:%f, radiansPerPixel:%f, radiansToDegrees:%f\n", objectPixelWidth, objectWidth, objectFullArcAngle, objectDistance, CAMERA_RADIANS_PER_PIXEL, RADIANS_TO_DEGREES);
  //objectDistance += TURRET_GIMBAL_POSITION.add(CAMERA_RELATIVE_TO_TURRET_GIMBAL_POSITION).x;
  return objectDistance;
}

double getLargestObjectDistance_SingleScan(vex::vision::object object, double objectWidth) {
  return getObjectDistance(object.width, objectWidth);
}

double getLargestObjectDistance_MultipleScans(double objectWidth, std::vector<Detection> objects) {
  return getObjectDistance(getLargestObject(objects).width, objectWidth);
}

void printDetection(vex::vision::object obj) {
  printf("X: %d Y: %d WIDTH: %d HEIGHT: %d\n", obj.centerX, obj.centerY, obj.width, obj.height);
}

void printDetection(Detection obj) {
  printf("X: %d Y: %d WIDTH: %d HEIGHT: %d\n", obj.centerX, obj.centerY, obj.width, obj.height);
}

void printDetections(std::vector<vex::vision::object> objects) {
  for (int i = 0; i < objects.size(); i++) {
    vex::vision::object obj = objects.at(i);
    printf("i: %d X: %d Y: %d WIDTH: %d HEIGHT: %d\n", i, obj.centerX, obj.centerY, obj.width, obj.height);
  }
}

void printDetections(std::vector<Detection> objects) {
  for (int i = 0; i < objects.size(); i++) {
    Detection obj = objects.at(i);
    printf("i: %d X: %d Y: %d WIDTH: %d HEIGHT: %d COLOR: %d\n", i, obj.centerX, obj.centerY, obj.width, obj.height, obj.color);
  }
}

Detection convertObject(vex::vision::object object, int color) {
  return Detection(object.centerX, object.centerY, object.width, object.height, color);
}

std::vector<Detection> snapshotMultipleColors(std::vector<int> colors) {
  std::vector<int> ballTypes;
  std::vector<Detection> combinedData;
  for (int c = 0; c < colors.size(); c++) {
    camera.takeSnapshot(colors.at(c));
    //printf("CAMERA DETECTIONS FOR COLOR %d:", colors.at(c));
    //printDetection(camera.largestObject);
    for (int j = 0; j < camera.objectCount; j++) {
      ballTypes.push_back(colors.at(c));
      Detection obj = convertObject(camera.objects[j], colors.at(c));
      //printf("CAMERA DETECTION %d:", j);
      //printDetection(obj);
      combinedData.push_back(obj); 
    }
  }
  BALL_TYPES = ballTypes;
  //printf("CAMERA DETECTIONS FOR ALL COLORS\n");
  //printDetections(combinedData);
  return combinedData;
}

vector3 rotateVectorByAzimuthAndElevation(vector3 v, double azimuth, double elevation) {
  azimuth /= RADIANS_TO_DEGREES;
  elevation /= RADIANS_TO_DEGREES;
  vector3 v2 = vector3(v.x*cos(elevation) - v.z*sin(elevation), v.y, v.z*cos(elevation) + v.x*sin(elevation)); // rotate by elevation
  vector3 v3 = vector3(v2.x*cos(azimuth) + v2.y*sin(azimuth), v2.y*cos(azimuth) - v2.x*sin(azimuth), v2.z); // rotate by azimuth
  return v3;
}

vector3 getDetectionPositionAsBall_OLD(Detection obj) { // get the worldspace position
  double distance = getObjectDistance(obj.width, WIDTH_BALL);
  distance += 0.5*WIDTH_BALL;
  double azimuth = (obj.centerX - 0.5*CAMERA_PIXEL_WIDTH) * CAMERA_DEGREES_PER_PIXEL;
  double elevation = (obj.centerY - 0.5*CAMERA_PIXEL_HEIGHT) * CAMERA_DEGREES_PER_PIXEL;
  vector3 ballPosition_TurretspaceRelativeToCamera = rotateVectorByAzimuthAndElevation(vector3(distance, 0, 0), -azimuth, -elevation);
  vector3 ballPosition_TurretspaceRelativeToGimbal = ballPosition_TurretspaceRelativeToCamera.difference(CAMERA_RELATIVE_TO_TURRET_GIMBAL_POSITION);
  vector3 ballPosition_Vehiclespace = rotateVectorByAzimuthAndElevation(ballPosition_TurretspaceRelativeToGimbal, 0, -getArmAngle()).difference(TURRET_GIMBAL_POSITION);
  vector3 ballPosition = rotateVectorByAzimuthAndElevation(ballPosition_Vehiclespace, -getHeading(), 0).add(position);
  return ballPosition;
}

vector3 getDetectionPositionAsBall(Detection obj) { // heavily simplified verison of the function above because it wasnt working
  double distance = getObjectDistance(obj.width, WIDTH_BALL);
  double azimuth = (obj.centerX - 0.5*CAMERA_PIXEL_WIDTH) * CAMERA_DEGREES_PER_PIXEL;
  azimuth += getHeading();
  azimuth /= RADIANS_TO_DEGREES;
  vector3 ballPosition = vector3(distance * cos(azimuth), distance * sin(azimuth), 1);
  return ballPosition;
}

bool ballPosition_InPlayingSpace(vector3 v) {
  vector3 buffer = vector3(-3, -3, 10); // Amount past the course dimensions we are willing to take
  double rampAvoidDistance = 3;
  if (v.x < -buffer.x) { return false; } // ball would be behind court
  if (v.x > 74 + buffer.x) { return false; } // ball would be behind wall
  if (fabs(v.z - 0.5*WIDTH_BALL) > buffer.z) { return false; } // ball would be above/underground
  if (fabs(v.y) > 50 + buffer.y) { return false; } // ball would be off the sides of the court
  if (fabs(v.y) < 12.5 + rampAvoidDistance - 0.5*buffer.x) { return false; } // ball would be near the ramp
  return true;
}

bool detectionAsBall_InPlayingSpace(Detection obj) {
  return ballPosition_InPlayingSpace(getDetectionPositionAsBall(obj));
}

bool detectionAsBall_GoodY(Detection obj) {
  /*double elevation = (obj.centerY - 0.5*CAMERA_PIXEL_HEIGHT) * CAMERA_DEGREES_PER_PIXEL;
  elevation += getArmAngle();
  if (elevation < 30) {
    return false;
  }
  return true;*/
  if (obj.centerY > CAMERA_PIXEL_HEIGHT*0.6) {
    return true;
  }
  return false;
}

std::vector<Detection> filterDetectionsForValidBalls(std::vector<Detection> input) {
  std::vector<Detection> validBalls;
  for (int i = 0; i < input.size(); i++) {
    //if (detectionAsBall_InPlayingSpace(input.at(i))) {
    if (detectionAsBall_GoodY(input.at(i))) {
      validBalls.push_back(input.at(i));
    }
  }
  return validBalls;
}

void getPlayingSide() {
  /*printf("start marker\n");
  std::vector<Detection> yellowIndicatorDetections = snapshotMultipleColors(std::vector<int>{YELLOW_INDICATOR});
  std::vector<Detection> greenIndicatorDetections = snapshotMultipleColors(std::vector<int>{GREEN_INDICATOR});
  printf("YELLOW\n");
  printDetections(yellowIndicatorDetections);
  camera.takeSnapshot(YELLOW_INDICATOR);
  printf("yellow count real: %d", camera.objectCount);
  printf("GREEN\n");
  printDetections(greenIndicatorDetections);
  double indicatorAverageCameraX;
  Detection yellowIndicator = getDetectionClosestTo(yellowIndicatorDetections, 0, 0);
  Detection greenIndicator = getDetectionClosestTo(greenIndicatorDetections, 0, 0);
  if (yellowIndicatorDetections.size() > 0 && greenIndicatorDetections.size() > 0) {
    indicatorAverageCameraX = 0.5*(yellowIndicator.centerX + greenIndicator.centerX);
    PLAYING_SIDE = (yellowIndicator.centerX > greenIndicator.centerX) ? -1 : 1;
  } else {
    if (yellowIndicatorDetections.size() > 0) {
      indicatorAverageCameraX = yellowIndicator.centerX;
      PLAYING_SIDE = (yellowIndicator.centerX > 0) ? -1 : 1;
    } else if (greenIndicatorDetections.size() > 0) {
      indicatorAverageCameraX = greenIndicator.centerX;
      PLAYING_SIDE = (yellowIndicator.centerX > 0) ? -1 : 1;
    } else {
      printf("----------------YELLOW+GREEN INDICATOR DETECTION FAIL--------------\n");
    }
    
  }*/
  PLAYING_SIDE = (sonarL.distance(inches) < sonarR.distance(inches)) ? -1 : 1;
  
  printf("playign side %d\n", PLAYING_SIDE);
  double oldY = position.y;
  /*vector3 cameraWorldPosition = position.add(TURRET_GIMBAL_POSITION.add(CAMERA_RELATIVE_TO_TURRET_GIMBAL_POSITION));
  double xDistance = 74 - cameraWorldPosition.x;
  double indicatorAverageAngle = indicatorAverageCameraX * CAMERA_RADIANS_PER_PIXEL;
  double yDistance = xDistance * sinf(indicatorAverageAngle);
  double theoreticalYDistance = INDICATOR_POSITION.y - cameraWorldPosition.y;
  position.y += (theoreticalYDistance - yDistance);*/
  double sonarYDistanceFromCOM = 5.75;
  switch (PLAYING_SIDE) {
    case -1: {position.y = -49 + sonarL.distance(inches) + sonarYDistanceFromCOM;}
    case 1:  {position.y =  49 - sonarR.distance(inches) - sonarYDistanceFromCOM;}
  }
    
  
  //printf("oldY: %f xDistance: %f  indicatorAverageCameraX: %f indicatorAverageAngle: %f yDistance: %f theoreticalYDistance: %f",
  //        oldY,    xDistance,     indicatorAverageCameraX,    indicatorAverageAngle,    yDistance,    theoreticalYDistance);
  printf("Y position adjusted from %f to %f\n", oldY, position.y);
}

void applyPlayingSide() {
  RED_HOOP_POSITION.mirror();
  BLUE_HOOP_POSITION.mirror();
  CENTER_HOOP_POSITION.mirror();
  YELLOW_BALL_HOLDER_POSITION.mirror();
  INDICATOR_POSITION.mirror();
  CORNER_POSITION.mirror();
}

void printData(std::vector<int> data) {
  for (int i = 0; i < data.size(); i++) {
    printf("DATAPOINT %d: %d", i, data.at(i));
  }
}

vex::color colorOfDetectionType(int i) {
  switch(i) {
    case 1: return vex::color::red;
    case 2: return vex::color::blue;
    case 3: return vex::color::yellow;
  }
  return vex::color::white;
}

void printDetectionsOntoScreen(std::vector<Detection> objects, int color) {
  for (int i = 0; i < objects.size(); i++) {
    Detection o = objects.at(i);
    Brain.Screen.drawRectangle(o.centerX-0.5*o.width, o.centerY-0.5*o.height, o.width, o.height, colorOfDetectionType(color));
  }
}

void yellowBallRun() { // The part of the auto script that runs towards the yellow ball at the beginning of the match
  // Shooter should already be set to intake mode from the setup phase.
  int ballDistance;
  int yellowBallFails = 0;
  int YELLOW_BALL_MAX_FAILS = 100;
  // Angle turret to yellow-ball-grabbing height
  //[ARM NOT ATTACHED] setArmAngle(15);
  // Align camera with largest yellow target and slam the throttle. Get to the yellow ball as fast as possible for the easy 10 points.
  do {
    std::vector<Detection> yellowBallDetections = snapshotMultipleColors(std::vector<int>{YELLOW_BALL});
    if (yellowBallDetections.size() == 0) {
      yellowBallFails++;
    }
    if (yellowBallFails > YELLOW_BALL_MAX_FAILS) {
      printf("Yellow ball failed to grab");
      return;
    }
    printf(".");
    ballDistance = getLargestObjectDistance_MultipleScans(WIDTH_BALL, yellowBallDetections);
    double error = getLargestObjectPosX_MultipleScans(yellowBallDetections) * TURNING_GAIN_FINE;
    driveCommand(100, error);
    updatePosition();
    printf("Ball distance: %d Error: %f\n", ballDistance, error);
    wait(10, msec);
  } while (ballDistance > 5);
  printf("Yellow ball grabbed");
  // Reverse to around the starting position.
  driveForwardDistance(8, 50, true);
  driveForwardDistance(-12, 100, true);
}

void ballSearch_GrabFoundBall() { // A preset motion that moves towards balls to pick them up
  driveForwardDistance(8, 50, true);
  driveForwardDistance(-12, 100, true);
}

void ballSearch_GuidanceLoop(std::vector<Detection> ballsDetected) { // The part of the ball-searching script that loops
  Detection ball = getLargestObject(ballsDetected);
  double distance = getLargestObjectDistance_MultipleScans(WIDTH_BALL, ballsDetected);
  double posX = getLargestObjectPosX_MultipleScans(ballsDetected);
  //   a. Check FOV for balls. If ball count is below the threshold, reverse/look around until one is found.
  //if ((ballsDetected.size() > 0 || distance > 30) && !timeLimited) {
  if (ballsDetected.size() != 0 && distance < 30) {
    //   b. Align to ball, move towards ball until at edge of camera's visual range
    double errorTurning = posX * TURNING_GAIN_BROAD * distance;
    double angle = fabs(posX * CAMERA_DEGREES_PER_PIXEL);
    double errorForward = (distance - MAX_DISTANCE_FROM_BALL*0.7) * FORWARD_GAIN;
    double speedMultiplier = fmax(90-angle, 0)/90;
    errorForward *= speedMultiplier;
    errorForward = fmin(errorForward, 70);
    driveCommand(errorForward, errorTurning);
    printf(".");
    if (distance < MAX_DISTANCE_FROM_BALL && angle < MAX_ANGLE_FROM_BALL) {
      //   c. Preset ball-grab sequence since now blind
      printf("Adding value %d to ballsHeld", ball.color);
      ballsHeld.push_back(ball.color);
      ballSearch_GrabFoundBall();
      printf("Ball grabbed");
      //   d. Keep track of held balls with a list
    }
  } else {
    driveCommand(0, 100);
  }
}

void printBallCoordinates(std::vector<Detection> balls) {
  for (int i = 0; i < balls.size(); i++) {
    vector3 ballPosition = getDetectionPositionAsBall(balls.at(i));
    printf("Ball %d: {%f, %f, %f} with color %d\n", i, ballPosition.x, ballPosition.y, ballPosition.z, balls.at(i).color);
    Brain.Screen.setCursor(1,1);
    Brain.Screen.print("Ball %d: {%f, %f, %f} with color %d\n", i, ballPosition.x, ballPosition.y, ballPosition.z, balls.at(i).color);
  }
  for (int i = 10; i > balls.size(); i--) {
    printf("\n");
  }
}

void searchForBalls() { // The part of the auto script that searches for balls when it needs more
  // Rev shooter to full/partial speed reverse
  setShooterDirection(1);
  // threshold = number of balls we need to have loaded before we start shooting them.
  std::vector<int> ballTypes = {RED_BALL, BLUE_BALL};
  std::vector<Detection> ballsDetected = snapshotMultipleColors(ballTypes);
  printf("-------------------------\nBall detections before filtering positions:\n");
  printDetections(ballsDetected);
  ballsDetected = filterDetectionsForValidBalls(ballsDetected);
  printf("Ball detections after filtering positions:\n");
  printDetections(ballsDetected);

  int BALL_THRESHOLD = 4;
  // While >0 balls seen, or ball count is below the threshold:
  while (ballsDetected.size() > 0 || ballsHeld.size() < BALL_THRESHOLD) {
    
    ballsDetected = snapshotMultipleColors(ballTypes);
    Brain.Screen.clearScreen();
    printDetectionsOntoScreen(ballsDetected, 1);
    printBallCoordinates(ballsDetected);
    ballsDetected = filterDetectionsForValidBalls(ballsDetected);
    printDetectionsOntoScreen(ballsDetected, 2);
    ballSearch_GuidanceLoop(ballsDetected);
    position = vector3(0,0,0);
    updatePosition();
    
    if (timeLimited) {return;}
  }
}

int getTargetHoop(int ball) { // Get the hoop we should aim to based on the current ball and auto vs. teleop period.
  if (inTeleopPeriod) {
    switch(ball) {
      case RED_BALL: return TARGET_RED_HOOP;
      case BLUE_BALL: return TARGET_CENTER_HOOP;
      case YELLOW_BALL: return TARGET_CENTER_HOOP;
      default: printf("getTargetHoop given invalid input of %d", ball); return -2;
    }
  } else {
    switch (ball) {
      case RED_BALL: return TARGET_RED_HOOP;
      case BLUE_BALL: return TARGET_BLUE_HOOP;
      case YELLOW_BALL: return TARGET_CENTER_AND_WAIT;
      default: printf("getTargetHoop given invalid input of %d", ball); return -2;
    }
  }
}

vector3 getTargetPosition(int target) {
  switch(target) {
    case TARGET_CENTER_AND_WAIT: return CORNER_POSITION;
    case TARGET_RED_HOOP: return RED_HOOP_POSITION;
    case TARGET_BLUE_HOOP: return BLUE_HOOP_POSITION;
    case TARGET_CENTER_HOOP: return CENTER_HOOP_POSITION;
    case TARGET_YELLOW_BALL_HOLDER: return YELLOW_BALL_HOLDER_POSITION;
    default: printf("getTargetPosition given invalid input of %d", target); return vector3(0,0,0);
  }
}

void pushBall() {
  double PUSH_BALL_ANGLE = 180; // the angle the pusher motor needs to rotate to push one ball out
  motorPusher.spinFor(PUSH_BALL_ANGLE, deg);
}

void resetPusherPosition() {
  double PUSHER_DEFAULT_ANGLE = 15; // the angle the pusher motor rests at
  motorPusher.spinTo(PUSHER_DEFAULT_ANGLE, deg, true);
}

void shootBalls() {
  // While >0 balls in clip:
  while (ballsHeld.size() > 0) {
    int ball = ballsHeld.at(ballsHeld.size()-1);
    int target = getTargetHoop(ball);
    if (target == TARGET_CENTER_AND_WAIT && !timeLimited) {
      return;
    }
    // a. Drive to a known hoop position
    // b. Align to hoop
    vector3 targetPosition = getTargetPosition(target);
    vector3 deltaPosition = targetPosition.difference(position);
    double angleToTarget = atan2f(deltaPosition.x, deltaPosition.y) * RADIANS_TO_DEGREES;
    vector3 driveSpot = vector3(20, 30*PLAYING_SIDE, 0);
    if (position.difference(driveSpot).magnitude() > MAX_DISTANCE_FROM_TARGET_BROAD) {
      driveGlobal(driveSpot, angleToTarget);
    }
    // c. Calculate hoop distance based off of vertical+horizontal size in camera's FOV and known vertical distance
    // d. Calculate necessary turret angle + shooter spinrate based off of math
    deltaPosition = targetPosition.difference(position);
    shooterInputs inputs = calculateShotAngleAndVelocity(deltaPosition);
    // e. Adjust bot angle + turret angle + shooter spinrate until within a margin of error
    setArmAngle(inputs.angle);
    setShooterSpeed(inputs.velocity);
    wait(10, msec);
    // f. Push one ball out with the piston system (the piston positions are preset/known, no calculations or readings needed to see if the ball is shot out)
    pushBall();
    printf("ball of color %d fired", ball.color);
    ballsHeld.pop_back();
  }
  resetPusherPosition();
}

unsigned long hex2dec(char hexChar) // this function is not mine
{
    std::string hex(1, hexChar);
    unsigned long result = 0;
    for (int i=0; i<hex.length(); i++) {
        if (hex[i]>=48 && hex[i]<=57)
        {
            result += (hex[i]-48)*pow(16,hex.length()-i-1);
        } else if (hex[i]>=65 && hex[i]<=70) {
            result += (hex[i]-55)*pow(16,hex.length( )-i-1);
        } else if (hex[i]>=97 && hex[i]<=102) {
            result += (hex[i]-87)*pow(16,hex.length()-i-1);
        }
    }
    return result;
}

double getHueFromRGB(std::string inputHex) { // algorithm from someone on stackExchange idk
  /*double red = 16*(int)hex2dec(inputHex[1]) + (int)hex2dec(inputHex[2]);
  double green = 16*(int)hex2dec(inputHex[3]) + (int)hex2dec(inputHex[4]);
  double blue = 16*(int)hex2dec(inputHex[5]) + (int)hex2dec(inputHex[6]);
  red /= 255;
  green /= 255;
  blue /= 255;
  double max;
  if (red > green && red > blue) {max = red;}
  else if (green > red && green > blue) {max = green;}
  else {max = blue;}
  double min;
  if (red < green && red < blue) {min = red;}
  else if (green < red && green < blue) {min = green;}
  else {min = blue;}
  double hue;
  if (max == red) {hue = (green-blue);}
  else if (max == green) {hue = 2 + (blue-red);}
  else {hue = 4 + (red-green);}
  hue *= 60/(max-min);
  if (hue < 0) {hue += 360;}
  return hue;*/
  double red = 16*(int)hex2dec(inputHex[1]) + (int)hex2dec(inputHex[2]);
  double hue = red * (100/(double)256);
  return hue;
}

char* intToChar(int value) {
  char* buffer = new char[10];
  sprintf(buffer, "%d", value);
  return buffer;
}

void printImage() {
  int pixels[480/IMAGE_PIXEL_RATIO][272/IMAGE_PIXEL_RATIO][3];
  for (int x = 0; x < 480; x += IMAGE_PIXEL_RATIO) {
      for (int y = 0; y < 272; y+= IMAGE_PIXEL_RATIO) {
          int i = (272/IMAGE_PIXEL_RATIO)*(x/IMAGE_PIXEL_RATIO) + (y/IMAGE_PIXEL_RATIO);
          int rgb = values[i];
          int blue = rgb % 256;
          rgb /= 256;
          int green = rgb % 256;
          rgb /= 256;
          int red = rgb;
          pixels[x/IMAGE_PIXEL_RATIO][y/IMAGE_PIXEL_RATIO][0] = red;
          pixels[x/IMAGE_PIXEL_RATIO][y/IMAGE_PIXEL_RATIO][1] = green;
          pixels[x/IMAGE_PIXEL_RATIO][y/IMAGE_PIXEL_RATIO][2] = blue;
      }
  }
  for (int x = 0; x < 480; x++) {
    for (int y = 0; y < 272; y++) {
      int px = x/IMAGE_PIXEL_RATIO;
      int py = y/IMAGE_PIXEL_RATIO;
      int red = pixels[px][py][0];
      int green = pixels[px][py][1];
      int blue = pixels[px][py][2];
      vex::color color = vex::color(red, green, blue);
      Brain.Screen.setPenColor(color);
      Brain.Screen.drawPixel(x,y);
      /*char* hexColor = "#      ";
      for (int j = 0; j < 6; j++) {
        hexColor[j+1] = image[i+j];
      }*/
      //std::string hexColor = "#" + image.substr(i, i+6);
      //hexColor = "#ffffff";
      //int hueColor = fmod(i,360);
      //if (hueColor < 120) {
      //  hueColor = 0;
      //} else {
      //  hueColor = 180;
      //}
      //hueColor = getHueFromRGB(hexColor);
      //hueColor = 100 + x - y;
      //Brain.Screen.setPenColor(hueColor);
      //Brain.Screen.drawPixel(x,y);
      //printf("%s",hexColor.c_str());
      //printf("%s\n",intToChar(hueColor));
    }
  }
}

/*---------------------------------------------------------------------------*/
/*                          Pre-Autonomous Functions                         */
/*                                                                           */
/*  You may want to perform some actions before the competition starts.      */
/*  Do them in the following function.  You must return from this function   */
/*  or the autonomous and usercontrol tasks will not be started.  This       */
/*  function is only called once after the V5 has been powered on and        */
/*  not every time that the robot is disabled.                               */
/*---------------------------------------------------------------------------*/



void pre_auton(void) {

  // All activities that occur before the competition starts
  // Example: clearing encoders, setting servo positions, ...
  //
  // uses a physical-contact position resetting technique
  //resetArmAngle();
  // shooter should be on intake mode at the beginning
  //setShooterDirection(-1);
  // calibrate the position + rotation by reversing back to the wall and resetting the IMU's position
  printf("milestone\n");
  //reverseToWall();
  printf("milestone\n");
  resetPosition();
  printf("milestone\n");
  getPlayingSide();
  printf("Playing side: %d", PLAYING_SIDE);
}

/*---------------------------------------------------------------------------*/
/*                                                                           */
/*                              Autonomous Task                              */
/*                                                                           */
/*  This task is used to control your robot during the autonomous phase of   */
/*  a VEX Competition.                                                       */
/*                                                                           */
/*  You must modify the code to add your own robot specific commands here.   */
/*---------------------------------------------------------------------------*/

void autonomous(void) {
  // ..........................................................................
  // Insert autonomous user code here.
  // ..........................................................................

  // ..........................................................................
  // What I'm thinking for the auto loop:
  //
  //
  // 
  while(1) {
    // PART 1: YELLOW BALL RUN
    yellowBallRun();

    // PART 2: SEARCH FOR BALLS
    searchForBalls();
    // PART 3: SHOOT BALLS

    shootBalls();
    // Angle turret to some positive value like +30deg
    // ..........................................................................
  }

}

/*---------------------------------------------------------------------------*/
/*                                                                           */
/*                              User Control Task                            */
/*                                                                           */
/*  This task is used to control your robot during the user control phase of */
/*  a VEX Competition.                                                       */
/*                                                                           */
/*  You must modify the code to add your own robot specific commands here.   */
/*---------------------------------------------------------------------------*/

void usercontrol(void) {
  // User control code here, inside the loop
  while (1) {
    // This is the main execution loop for the user control program.
    // Each time through the loop your program should update motor + servo
    // values based on feedback from the joysticks.

    // ........................................................................
    // Insert user code here. This is where you use the joystick values to
    // update your motors, etc.
    // ........................................................................

    // ..........................................................................
    // What I'm thinking for the manual loop:
    //
    // Either the below or just a continutation of auto control
    //
    // LEFT JOYSTICK
    //   X+Y: Directional control of the robot while not performing another action.
    //
    // LEFT BUMPERS
    //   Top: Set robot to shooting mode. Robot will force-enter this mode if time is low or ball storage is full.
    //   Bottom: Set robot to intake mode.
    // ..........................................................................

    wait(20, msec); // Sleep the task for a short amount of time to
                    // prevent wasted resources.
  }
}

//
// Main will set up the competition functions and callbacks.
//
int main() {
  /* ---------- REAL CODE FOR THE COMPETITION ---------- */
  // Set up callbacks for autonomous and driver control periods.
  //Competition.autonomous(autonomous);
  //Competition.drivercontrol(usercontrol);
  //setShooterDirection(-1);
  //printImage();
  //printf("done1\n");
  //setShooterDirection(1);
  //printf("/SFhkfdhjksdf\n");
  pre_auton();
  //autonomous();
  driveGlobal(vector3(40, 30, 0).mirror(), 180);
  driveGlobal(vector3(30, 30, 0).mirror(), 0);
  driveGlobal(vector3(20, 30, 0).mirror(), 0);
  driveGlobal(vector3(30, 30, 0).mirror(), 0);
  driveGlobal(vector3(40, 30, 0).mirror(), -180);
  driveForwardDistance(1000, 100, true);
  wait(1000000000,sec);
  // Run the pre-autonomous function.
  //while(true) {
  //  printf("distanceL: %f\n", sonarL.distance(inches));
  //  printf("distanceR: %f\n", sonarR.distance(inches));
  //  wait(10, msec);
  //}
  //pre_auton();
  
  //driveGlobal(vector3(30, 25, 0).mirror(), 0);

  // Prevent main from exiting with an infinite loop.
  //printf("done\n");
  //while (true) {
  //  wait(100, msec);
  //}

  /* ---------- CODE THAT TESTS FUNCTIONS ---------- */
  /* ---------- it doesnt work because c++  disables exceptions by default and idk how to activate them ----------*/
  Brain.Screen.setCursor(1,1);
  /*Brain.Screen.print("resetArmAngle(); "); try {resetArmAngle(); Brain.Screen.print("succeeded\n");} catch (const std::exception& e) {Brain.Screen.print("failed\n");} wait(1000, msec);
  Brain.Screen.print("setArmAngle(15); "); try {setArmAngle(15); Brain.Screen.print("succeeded\n");} catch (const std::exception& e) {Brain.Screen.print("failed\n");} wait(1000, msec);
  Brain.Screen.print("setShooterDirection(1); "); try {setShooterDirection(1); Brain.Screen.print("succeeded\n");} catch (const std::exception& e) {Brain.Screen.print("failed\n");} wait(1000, msec);
  Brain.Screen.print("camera.takeSnapshot(RED_BALL); "); try {camera.takeSnapshot(RED_BALL); Brain.Screen.print("succeeded\n");} catch (const std::exception& e) {Brain.Screen.print("failed\n");} wait(1000, msec);
  Brain.Screen.print("getLargestObjectPosX(); "); try {getLargestObjectPosX(); Brain.Screen.print("succeeded\n");} catch (const std::exception& e) {Brain.Screen.print("failed\n");} wait(1000, msec);
  Brain.Screen.print("getLargestObjectDistance_SingleScan(WIDTH_BALL); "); try {getLargestObjectDistance_SingleScan(WIDTH_BALL); Brain.Screen.print("succeeded\n");} catch (const std::exception& e) {Brain.Screen.print("failed\n");} wait(1000, msec);
  Brain.Screen.print("yellowBallRun(); "); try {yellowBallRun(); Brain.Screen.print("succeeded\n");} catch (const std::exception& e) {Brain.Screen.print("failed\n");} wait(1000, msec);
  Brain.Screen.print("printImage(); "); try {printImage(); Brain.Screen.print("succeeded\n");} catch (const std::exception& e) {Brain.Screen.print("failed\n");} wait(1000, msec);
  */

 /* ---------- CODE THAT TESTS FUNCTIONS LAZILY ---------- */
 //int printValue = 0;
  //setShooterDirection(1);
  //resetArmAngle(); // Good!
  //Brain.Screen.print("resetArmAngle() OK\n");
  //wait(3, sec);
  //setArmAngle(15); // Good!
  //Brain.Screen.print("setArmAngle(15) OK\n");
  //wait(3, sec);
  //setShooterSpeed(193); // Good!
  //setShooterDirection(1);
  //Brain.Screen.print("setShooterDirection(1) OK\n");
  //wait(3, sec);
  //wait(5, sec);
  //getPlayingSide();
  //printf("------------------Playing side: %d\n", PLAYING_SIDE);
  //wait(1, sec);
  //while(true) {
  //camera.takeSnapshot(RED_BALL);
  //printf("camera.takeSnapshot(RED_BALL) OK\n");
  //Brain.Screen.newLine();
  //printDetection(camera.largestObject);
  //printf("Number of detections: %d\n", camera.objectCount);
  //printf("%d ", getLargestObjectPosX_SingleScan(camera.largestObject));
  //printf("getLargestObjectPosX_SingleScan() OK\n");
  //wait(1, msec);
  //printf("%f ", getLargestObjectDistance_SingleScan(camera.largestObject, WIDTH_BALL));
  //printf("getLargestObjectDistance_SingleScan(WIDTH_BALL) OK (with width of %d)\n", camera.largestObject.width);
  //wait(3, sec);
  //printf("--------------------------------------\n");
  //}
  //std::vector<int> searchValues = {RED_BALL, BLUE_BALL, YELLOW_BALL};
  //std::vector<Detection> multipleDetection = snapshotMultipleColors(searchValues);
  //printf("snapshotMultipleColors({RED_BALL, BLUE_BALL, YELLOW_BALL}) OK\n");
  //printDetections(multipleDetection);
  //printf("g");
  //wait(3, sec);
  //printf("%d ", getLargestObjectPosX_MultipleScans(multipleDetection));
  //printf("getLargestObjectPosX_MultipleScans(multipleDetection) OK\n");
  //wait(3, sec);
  //printf("%f ", getLargestObjectDistance_MultipleScans(WIDTH_BALL, multipleDetection));
  //printf("getLargestObjectDistance_MultipleScans(WIDTH_BALL, multipleDetection) OK\n");
  //wait(3, sec);
  wait(3, sec);
  //printImage(); // Bad
  //wait(30,sec);
  //printf("printImage() OK\n");
  //yellowBallRun();
  //printf("yellowBallRun() OK\n");
  wait(3, sec);
  //searchForBalls();
  //printf("searchForBalls() OK\n");
  //shootBalls();
  //printf("shootBalls() OK\n");

}
